/** Webtrekk MCP 1.0.5 - 2023-3-15 */(function(){'use strict';function aa(c,a){aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,d){b.__proto__=d}||function(b,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])};return aa(c,a)}function g(c,a){function b(){this.constructor=c}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");aa(c,a);c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}
function p(c,a,b){if(b||2===arguments.length)for(var d=0,e=a.length,f;d<e;d++)!f&&d in a||(f||(f=Array.prototype.slice.call(a,0,d)),f[d]=a[d]);return c.concat(f||Array.prototype.slice.call(a))}var ba="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function r(c){for(var a in c)return!1;return!0}function t(c,a){for(var b in c)a.call(void 0,c[b+""],b+"",c)}
function ca(c){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];for(var d,e=0;e<a.length;e++){b=a[e];for(d in b)c[d+""]=b[d+""];for(var f=0;f<ba.length;f++)d=ba[f],Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d])}}function da(c){var a={},b;for(b in c)a[b+""]=c[b+""];return a}function ea(c,a){var b={},d;for(d in c)a(c[d+""],d+"",c)&&(b[d+""]=c[d+""]);return b}function fa(c){var a=[],b=0,d;for(d in c)a[b++]=d;return a}var ha={},ia="mapp_wt_".concat(1E9*Math.random()>>>0),ja=0;
function ka(){return"https:"===document.location.protocol?"https:":"http:"}function u(c){var a=typeof c;return"object"===a&&null!==c||"function"===a}function v(c){var a=typeof c;a="object"!==a?a:c?Array.isArray(c)?"array":a:"null";return"array"===a||"object"===a&&"number"===typeof c.length}function w(c){return"number"===typeof c}function x(c){return"string"===typeof c}function la(c){return"function"!==typeof c}function ma(c){return"undefined"!==typeof c&&null!==c}function z(){return Date.now()}
function A(c,a){return"undefined"===typeof c?a:c}function B(){try{var c=window.encodeURI(window.location.href);if(!ha[c]){var a=new URL(c);a&&a.searchParams&&a.searchParams.get&&(ha[c]=a.searchParams.get("wt_mcp_parent"))}var b="true"===ha[c];return window.parent!==window&&b}catch(d){D.H({type:"error",I:"isLikelyChildFrame - ".concat(d.message)})}return!1}
function na(c){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];for(b=0;b<a.length;b++){if(!(c&&null!==c&&a[b]in c))return!1;c=c[a[b]]}return!0}var E=JSON.parse,F=JSON.stringify,pa=0,qa=function(){function c(a,b,d,e){this.Qa=this.lb=!1;this.listener=a;this.proxy=b;this.src=d;this.type=e;this.key=++pa}c.prototype.sd=function(){this.lb=!0;this.src=this.proxy=this.listener=null};return c}();
function G(c,a){var b;void 0===b&&(b=0);b=null===b?0:0>b?Math.max(0,c.length+b):b;if("string"===typeof c)return"string"!==typeof a||1!==a.length?-1:c.indexOf(a,b);for(;b<c.length;b++)if(b in c&&c[b]===a)return b;return-1}function H(c,a){for(var b=c.length,d=0;d<b;d++)a(c[d],d,c)}function I(c,a){for(var b=c.length,d=Array(b),e="string"===typeof c?c.split(""):c,f=0;f<b;f++)f in e&&(d[f]=a(e[f],f,c));return d}function ra(c,a){a=G(c,a);var b;(b=0<=a)&&Array.prototype.splice.call(c,a,1);return b}
function sa(c){for(var a=0,b=0,d={};b<c.length;){var e=c[b++],f=e;if(u(f)){var h="o".concat;f=Object.prototype.hasOwnProperty.call(f,ia)&&f[ia]||(f[ia]=++ja);h=h.call("o",f)}else h=(typeof f).charAt(0)+f;Object.prototype.hasOwnProperty.call(d,h)||(d[h]=!0,c[a++]=e)}c.length=a}
var ta=function(){function c(a){this.K={};this.Mc=0;this.src=a}c.je=function(a,b){for(var d=0;d<a.length;++d){var e=a[d];if(!e.lb&&e.listener===b)return d}return-1};c.prototype.add=function(a,b,d){var e=a.toString();a=this.K[e];a||(a=this.K[e]=[],this.Mc++);var f=c.je(a,b);-1<f?(b=a[f],d||(b.Qa=!1)):(b=new qa(b,null,this.src,e),b.Qa=d,a.push(b));return b};c.prototype.Le=function(a){var b=a.type;b in this.K&&ra(this.K[b],a)&&(a.sd(),0===this.K[b].length&&(delete this.K[b],this.Mc--))};return c}(),
ua="mapp_webtrekk_em_".concat(1E6*Math.random()|0);function va(c){c=c[ua];return c instanceof ta?c:null}function wa(c,a){var b=c.listener,d=c.src;c.Qa&&xa(c);return b.call(d,a)}function ya(c){return function(a){return c.lb?!0:wa(c,a)}}
function za(c,a,b,d){if(!a)throw Error("Invalid event type");var e=va(c);e||(c[ua]=e=new ta(c));b=e.add(a,b,d);if(b.proxy)return b;d=ya(b);b.proxy=d;c.addEventListener?c.addEventListener(a.toString(),d,!1):c.attachEvent?c.attachEvent("on".concat(a.toString()),d):c.addListener&&c.removeListener&&c.addListener(d);return b}function Aa(c,a,b){if(Array.isArray(a)){for(var d=0;d<a.length;d++)Aa(c,a[d],b);return null}return za(c,a,b,!0)}
function xa(c){if("number"===typeof c||!c||c.lb)return!1;var a=c.src,b=c.type,d=c.proxy;a.removeEventListener?a.removeEventListener(b,d,!1):a.detachEvent?a.detachEvent("on".concat(b),d):a.addListener&&a.removeListener&&a.removeListener(d);(b=va(a))?(b.Le(c),0===b.Mc&&(b.src=null,a[ua]=null)):c.sd();return!0}function J(c,a,b){if(Array.isArray(a)){for(var d=0;d<a.length;d++)za(c,a[d],b);return null}return za(c,a,b,!1)}var Ba=Aa;
function Ca(c){if(c&&(c=va(c))){var a=0,b="keyup".toString(),d;for(d in c.K)if(!b||d===b)for(var e=c.K[d].concat(),f=0;f<e.length;++f)xa(e[f])&&++a}}
var Da=xa,Ea=new (function(){function c(){this.sb={};this.key=1;this.fa=[];this.Ob=0;this.Cc=[]}c.prototype.subscribe=function(a,b,d){var e=this.sb[a];e||(e=this.sb[a]=[]);var f=this.key;this.fa[f]=a;this.fa[f+1]=b;this.fa[f+2]=d;this.key=f+3;e.push(f);return f};c.prototype.Ke=function(a){for(var b=1;b<arguments.length;b++);if(b=this.sb[a]){var d=Array(arguments.length-1),e;var f=1;for(e=arguments.length;f<e;f++)d[f-1]=arguments[f];this.Ob++;try{for(f=0,e=b.length;f<e;f++){var h=b[f];this.fa[h+1].apply(this.fa[h+
2],d)}}finally{if(this.Ob--,0<this.Cc.length&&0===this.Ob)for(;h=this.Cc.pop();)this.Fd(h)}}};c.prototype.unsubscribe=function(a,b,d){if(a=this.sb[a]){var e=this.fa;if(a=a.find(function(f){return e[f+1]===b&&e[f+2]===d}))return this.Fd(a)}return!1};c.prototype.Fd=function(a){var b=this.fa[a];if(b){var d=this.sb[b];0!==this.Ob?(this.Cc.push(a),this.fa[a+1]=function(){}):(d&&ra(d,a),delete this.fa[a],delete this.fa[a+1],delete this.fa[a+2])}return!!b};return c}());function K(c,a){Ea.Ke(c,a)}
function L(c,a){Ea.subscribe(c,a)}var Fa=/&([^;\s<&]+);?/g,Ga=/[\x00&<>'']/,Ha=/&/g,Ia=/</g,Ja=/>/g,Ka=/'/g,La=/'/g,Ma=/\x00/g;function Na(c){var a={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},b=window.document.createElement("div");return c.replace(Fa,function(d,e){var f=a[d];if(f)return f;"#"===e.charAt(0)&&(e=Number("0".concat(e.substring(1))),isNaN(e)||(f=String.fromCharCode(e)));f||(b.innerHTML="".concat(d," "),f=b.firstChild.nodeValue.slice(0,-1));return a[d]=f})}
var Oa=String.prototype.trim?function(c){return c.trim()}:function(c){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(c)[1]};function Pa(c){for(var a=0,b=0;b<c.length;++b)a=31*a+c.charCodeAt(b)>>>0;return a}var Qa={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Ra(c){c=String(c);"application/xhtml+xml"===document.contentType&&(c=c.toLowerCase());return document.createElement(c)}function Sa(c,a){t(a,function(b,d){"style"===d?c.style.cssText=b:"class"===d?c.className=b:Qa.hasOwnProperty(d)?c.setAttribute(Qa[d],b):0===d.lastIndexOf("aria-",0)||0===d.lastIndexOf("data-",0)?c.setAttribute(d,b):c[d]=b})}
function Ta(c,a,b){b=b||document;c=c&&"*"!==c?String(c).toUpperCase():"";return b.querySelectorAll&&b.querySelector&&(c||a)?b.querySelectorAll(c+(a?".".concat(a):"")):[]}function Ua(c,a){x(a)&&(a=new Text(a));c.appendChild(a)}function Va(c){return"string"===typeof c.className?c.className:c.getAttribute&&c.getAttribute("class")||""}function Wa(c,a){"string"===typeof c.className?c.className=a:c.setAttribute&&c.setAttribute("class",a)}function Xa(c,a){c=Va(c).match(/\S+/g)||[];return 0<=G(c,a)}
function Ya(c,a){var b=Va(c);Wa(c,b+(0<b.length?" ".concat(a):a))}function Za(c,a){Xa(c,a)&&Wa(c,Array.prototype.filter.call(Va(c).match(/\S+/g)||[],function(b){return b!==a}).join(" "))}function $a(c,a,b,d){c=d||c;d=a&&"*"!==a?String(a).toUpperCase():"";return c.querySelectorAll&&c.querySelector&&(d||b)?c.querySelector(d+(b?".".concat(b):"")):Ta(a,b,c)[0]||null}
var M={appendChild:Ua,Pd:function(c,a){for(var b=0,d=a.length;b<d;b++)Ua(c,a[b])},A:function(c,a){for(var b=[],d=2;d<arguments.length;d++)b[d-2]=arguments[d];c=String(c);d=Ra(c);a&&("string"===typeof a?d.className=a:Array.isArray(a)?d.className=a.join(" "):Sa(d,a));if(0<b.length)for(var e=0;e<b.length;e++)Ua(d,b[e]);return d},createElement:Ra,Bb:function(c){return"string"===typeof c?document.getElementById(c):c},jd:Ta,hf:$a,re:function(c,a){a=a||document;return a.querySelectorAll&&a.querySelector?
a.querySelectorAll(".".concat(c)):a.getElementsByClassName?a.getElementsByClassName(c):[]},qe:function(c,a){var b=a||document;return(b.getElementsByClassName?b.getElementsByClassName(c)[0]:$a(document,"*",c,a))||null},removeNode:function(c){return c&&c.parentNode?c.parentNode.removeChild(c):null},wd:function(c){for(var a;a=c.firstChild;)c.removeChild(a)},bc:Ya,Qb:Za,gf:function(c,a,b){Za(c,a);Ya(c,b)},se:function(){return document.head||document.getElementsByTagName("head")[0]}},ab=new (function(){function c(){var a=
this;this.Ub={};this.Ue=function(b){return new Promise(function(d,e){D.log("browserStorage: starting lsSync");if(a.pc())if(a.Ub[b])d({});else if(B())D.log("browserStorage: stopping lsSync because of execution in iframe"),d({});else{var f=window.setTimeout(function(){D.error("browserStorage: timeout loading lsSync iframe");f=null;e()},2E3);J(window,"message",function(h){h=h.data;x(h)&&(h={type:h});if(u(h))if("string"===typeof h.type&&-1!==h.type.indexOf("mcp-ls-sync-err"))D.error("browserStorage: error in lsSync iframe",
h.type),D.H({type:"error",I:"browserStorage: error in lsSync iframe - ".concat(h.type)});else if("mcp-ls-sync"===h.type&&h.data&&"string"===typeof h.data&&0===h.data.indexOf("{MCPDATASET}-")){D.info("browserStorage: got mcp event msg",h);h.data=h.data.slice(13);var k={};try{k=E(h.data)||{}}catch(l){D.error("browserStorage: couldnt parse ".concat(h.data))}null!==f?(D.log("browserStorage: lsSync established! With:",k),window.clearTimeout(f),f=null,d(k)):null===k||r(k)||(D.log("browserStorage: lsSync received new data",
k),K("updateVisitStore",k))}});a.Ub[b]=M.A("iframe",{id:"wt-mcp-ls-sync-".concat(b),width:"0px",height:"0px",style:"display: none;",sandbox:"allow-scripts allow-same-origin",src:"https://".concat(b,".mateti.net/mcp/ls.html?trackId=").concat(b)});document.head.appendChild(a.Ub[b])}else d({})})};this.Nc=function(b){D.log("browserStorage: updating lsSync data");try{var d=b;u(d)&&(d=F(b));d="{MCPDATASET}-".concat(d);t(a.Ub,function(e,f){e&&e.contentWindow&&(D.log("browserStorage: lsSync posting new data to ".concat(f)),
e.contentWindow.postMessage(d,"*"))})}catch(e){D.error("Problem posting message to iframe - ".concat(e.message)),D.H({type:"error",I:"Problem posting message to iframe - ".concat(e.message)})}};c.Ve()?this.storage=window.localStorage:D.H({type:"info",I:"No accessible storage found"})}c.Ve=function(){try{var a=window.localStorage;a.setItem("__storage_test__","__storage_test__");a.removeItem("__storage_test__");return!0}catch(b){return!1}};c.prototype.pc=function(){return null!==this.storage};return c}());
function N(c,a){if(u(a)||v(a))try{a=F(a)}catch(b){}try{window.localStorage.setItem(c,String(a))}catch(b){return!1}return!0}function bb(c){var a="";try{return a=window.localStorage.getItem(c)||"",E(a)}catch(b){}return a}var O=0,cb=0;function db(){try{if(!window.localStorage)return O;var c=bb("wt.mcp.debug");if(x(c)||w(c))O=Number(c)}catch(a){O=0}return O}function eb(){try{if(!window.localStorage)return cb;var c=bb("wt.mcp.prediction");if(x(c)||w(c))cb=Number(c)}catch(a){cb=0}return cb}
function fb(c,a){document.documentElement.addEventListener("mcpDebugTrigger-".concat(c),function(){a&&a.show&&a.show()})}function P(c){c=new CustomEvent("mcpDebugReceiver",{detail:{type:"mcpRuleFired",data:{uuid:c.oa||"",divId:c.u||"",type:c.type||"",rtb:c.Ja||"",plc:c.Wa||"",cmp:c.cmp||"",segment:c.xd||"",content:c.content||""}}});document.documentElement.dispatchEvent(c)}
function gb(c){var a=[];t(c,function(b,d){if("undefined"!==typeof b){try{var e=encodeURIComponent(b)}catch(f){e=escape(b)}a.push("".concat(d,"=").concat(e))}});return a.join("&")}function hb(c,a){a=gb(a);var b=!1;-1===c.indexOf("?")&&(b=!0);return c+(b?"?":"&")+a}function ib(){return-1!==jb().search("Trident")||-1!==jb().search("MSIE")}
function kb(){var c=jb();if(ib()){var a=/rv: *([\d.]*)/.exec(c);if(a&&a[1])c=a[1];else{a="";var b=/MSIE +([\d.]+)/.exec(c);if(b&&b[1])if(c=/Trident\/(\d.\d)/.exec(c),"7.0"===b[1])if(c&&c[1])switch(c[1]){case "4.0":a="8.0";break;case "5.0":a="9.0";break;case "6.0":a="10.0";break;case "7.0":a="11.0"}else a="7.0";else a=b[1];c=a}c=parseFloat(c)}else c=-1;return c}function jb(){return window.navigator.userAgent}var lb=jb,mb={},nb=null;
function ob(c){try{var a=c.split("_");if("string"===typeof a[3])return a[3].replace(/([A-Z])/g," $1")}catch(b){}return c}function pb(c){w(c)&&(c=Math.round(100*c)/100);return c}
function qb(c){if("undefined"===typeof mb[c]){var a=nb.document.createElement("div");a.id="wt_mcp_".concat(c);a.style.color="#FFFFFF";a.style["font-size"]="12px";a.style["letter-spacing"]="0.1em";a.style["line-height"]="150%";a.style["font-family"]="'Source Sans Pro',sans-serif";nb.document.body.appendChild(a);mb[c]=a}return mb[c]}
function rb(c){void 0===c&&(c="log");for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];/{\s*\[native code]\s*}/.test(String(window.console[c]))||(b=document.createElement("iframe"),b.style.display="none",document.body.appendChild(b),window.console=b.contentWindow.console);if(!ib()||10<=kb())window.parent!==window?(b=((window.frameElement||{}).src||"").split("/"),a.unshift("MCP(Iframe ".concat((b[b.length-1]||"").split("wt_eid=")[0],")"))):a.unshift("MCP"),window.console[c].apply(window.console,
a);else try{if(window.console[c](a[0]),a[1])window.console[c]("object"===typeof a[1]?F(a[1]):a[1])}catch(d){}}
function sb(c,a,b){if(null===nb){var d=document.createElement("iframe");d.id="wt_mcp_prediction";document.body.appendChild(d);nb=d.contentWindow}window.setTimeout(function(){var e=ob(c);e=""+"<div style='text-align: center;'>\n            <h3 style='font-size: 40px; text-align:center; margin-bottom: 10px;'>Webtrekk Predictions:</h3>\n            <h1>".concat(pb(a),"%</h1>\n            <span><b>").concat(e,"</b></span>\n        </div>");e+='<h4 style="font-size: 20px; margin-bottom:10px;">Input factors:</h4>';
var f=[];t(b,function(k,l){v(k)&&(k=k.join(", "));f.push("<span> - ".concat(l,": <i>").concat(pb(k),"</i></span>"))});var h=c.replace(/\W/ig,"").toLowerCase();qb(h).innerHTML="<div style='margin: 5px 0 0 20px;'>".concat(e).concat(f.join("<br/>"),"</div>")},250)}
function tb(c,a,b,d,e,f){void 0===d&&(d=!1);void 0===e&&(e="");void 0===f&&(f="");var h=c;-1!==c.indexOf(";")&&(-1!==c.indexOf("&")&&(c=Na(c)),h=c);c=M.jd("body")[0];!d&&c?(b="".concat(b,"/mcp/rm.html"),b+="?url=".concat(window.encodeURIComponent(h)),b+="&campaign=".concat(window.encodeURIComponent(a)),b+="&acc=".concat(window.encodeURIComponent(e)),b+="&id=".concat(window.encodeURIComponent(f)),e=M.A,f="wt-audience-stream-".concat,Ga.test(a)&&(-1!==a.indexOf("&")&&(a=a.replace(Ha,"&amp;")),-1!==
a.indexOf("<")&&(a=a.replace(Ia,"&lt;")),-1!==a.indexOf(">")&&(a=a.replace(Ja,"&gt;")),-1!==a.indexOf('"')&&(a=a.replace(Ka,"&quot;")),-1!==a.indexOf("'")&&(a=a.replace(La,"&#39;")),-1!==a.indexOf("\x00")&&(a=a.replace(Ma,"&#0;"))),a=e.call(M,"iframe",{horizontalscrolling:"no",verticalscrolling:"no",scrolling:"no",width:"0px",height:"0px",seamless:"true",name:f.call("wt-audience-stream-",a),sandbox:"allow-scripts",style:"display: none;",src:b}),M.appendChild(c,a)):(new Image).src=h}
var D={info:function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];2===O&&rb.apply(void 0,p(["info"],c,!1))},log:function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];O&&rb.apply(void 0,p(["log"],c,!1))},error:function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];O&&rb.apply(void 0,p(["error"],c,!1))},display:function(c,a,b){O&&sb(c,a,b)},H:function(c){c=hb("//t.mateti.net/t/l",{trackId:c.trackId,deid:c.F,type:c.type,maPluginVersion:"1.0.5",mcpVersion:c.jf,
pixelVersion:(c.X||{}).version,pluginVersion:c.kf,sessionId:c.sessionId,userAgent:lb(),msg:c.I,src:c.src?c.src:"MCP"});tb(c,"","",!0)},Dd:tb};
function ub(){if(!vb&&"undefined"!==typeof window.wt_mcp_hide&&"function"===typeof window.wt_mcp_hide.show){vb=!0;var c=window.wt_mcp_hide;c.show();c.show=function(){};c.mcp=(new Date).getTime()-c.start;1===parseInt("".concat(10*Math.random()))&&(c="{def: ".concat(c.def,",duration: ").concat(c.duration,",mcp: ").concat(c.mcp,",timeout: ").concat(c.timeout,"}"),wb("stop: log",c),D.H({trackId:xb,type:"hide",I:c}));wb("stop: execute 'wt_mcp_hide.show' and show page content",window.wt_mcp_hide)}}
function wb(c,a){D.log("mcp.hide.".concat(c),a)}var R={},yb=0,vb=!1,xb="";function zb(c,a){xb=c.join(",");for(var b=0,d=c.length;b<d;b++){var e=c[b];"string"===typeof e&&""!==e&&"undefined"===typeof R[e]&&(yb++,R[e]=[],wb("register: ".concat(e," for async hide"),a))}}function Ab(c,a,b){if("undefined"!==typeof R[c]){var d=R[c].indexOf(a);-1!==d&&(R[c].splice(d,1),wb("ready: '".concat(a,"' for ").concat(c),b));0===R[c].length&&(delete R[c],yb--)}0>=yb&&ub()}var Bb=wb;
function Cb(c){if(db())throw c;}function Db(c,a){c||Cb("Expected condition but got ".concat(c,": ").concat(c," ").concat(a))}function S(c,a){"string"!==typeof c&&Cb("Expected string but got ".concat(typeof c,": ").concat(c," ").concat(a))}function T(c,a){Array.isArray(c)||Cb("Expected array but got ".concat(typeof c,": ").concat(c," ").concat(a))}function Eb(c){u(c)||Cb("Expected object but got ".concat(typeof c,": ").concat(c," ").concat(void 0))}
function Fb(c,a){("number"!==typeof c||isNaN(c))&&Cb("Expected number but got ".concat(typeof c,": ").concat(a?a:c))}function Gb(c,a){"boolean"!==typeof c&&Cb("Expected boolean but got ".concat(typeof c,": ").concat(a?a:c))}var Hb=[];
function Ib(c,a,b){var d=!1;if("object"===typeof b){var e=b.Rb;d=b.lf||!1;var f=b.domain||void 0;var h=b.path||void 0;var k=b.Ua}if(/[;=\s]/.test(c))throw Error("Invalid cookie name '".concat(c,"'"));if(/[;\r\n]/.test(a))throw Error("Invalid cookie value ".concat(a));void 0===k&&(k=-1);document.cookie="".concat(c,"=").concat(a).concat(f?";domain=".concat(f):"").concat(h?";path=".concat(h):"").concat(0>k?"":0===k?";expires=".concat((new Date(1970,1,1)).toUTCString()):";expires=".concat((new Date(Date.now()+
1E3*k)).toUTCString())).concat(d?";secure":"").concat(null!==e?";samesite=".concat(e):"")}function Jb(c,a){for(var b="".concat(c,"="),d=(document.cookie||"").split(";"),e=0,f;e<d.length;e++){f=Oa(d[e]);if(0===f.lastIndexOf(b,0))return f.substring(b.length);if(f===c)return""}return a}function Kb(c){Ib(c,"",{Ua:0,path:void 0,domain:void 0})}
function Lb(){if(!window.navigator.cookieEnabled)return!1;if(""!==document.cookie)return!0;Ib("MAPPWTTEST","1",{Ua:60});if("1"!==Jb("MAPPWTTEST"))return!1;Kb("MAPPWTTEST");return!0}var Mb=[],Nb=[];function Ob(c){c={u:c.divId,ya:c.urlregex};S(c.u);return c}function Pb(c){T(c.bb);T(c.h);T(c.Nb)}
function Qb(c){D.log("externalToFilterConfig",c);c&&u(c)||(c={divIds:[],inputKeys:[],placements:[]});var a={bb:v(c.divIds)?I(c.divIds,Ob):[],h:c.inputKeys||Mb,Nb:v(c.placements)?c.placements:Nb};H(a.h,function(b,d){0===b.indexOf("productCategory_")&&(a.h[d]="productCategory")});Pb(a);return a}function Rb(c){D.log("externalToInsessionConfig",c);c={data:c.data||"",zb:c.feed||"",h:c.inputKeys||[]};S(c.data);S(c.zb);return c}
function Sb(c){c=c||{};D.log("extToServerConfig",c);c={filter:Qb(c.filter),fb:I(c.insession||[],Rb),na:c.serverInputKeys||{},ta:c.clientRules||[],F:c.deid};Eb(c.filter);T(c.fb);T(c.ta);Eb(c.na);return c}
function Tb(c,a,b,d,e){var f={method:a},h=c.split(".").pop();"html"!==h&&"json"!==h&&(f.credentials="include",f.headers={"Content-Type":"application/json"});"GET"!==a&&(f.body=F(b));window.fetch(c,f).then(function(k){if(!k.ok)throw k;return k.text()}).catch(function(k){e({code:k.status,text:k.statusText})}).then(function(k){d(k)})}function Ub(c,a,b){a=a?a:"POST";b=b?b:{};return new Promise(function(d,e){Tb(c,a,b,d,e)})}
var Vb=function(){function c(a,b){this.Va=null;this.Tb="wt.mcp.w"+a.trackId;this.j=a;this.G={};this.sessionId=Pa(z()+String(parseInt("".concat(100*Math.random()),10)));if(Lb())try{this.sessionId=parseInt(Jb("wt_mcp_sid",this.sessionId));for(var d=0,e=document.domain,f=e.split(".");d<f.length-1&&-1===document.cookie.indexOf("wt_mcp_sid=".concat(this.sessionId));)e=f.slice(-1-++d).join("."),Ib("wt_mcp_sid","".concat(this.sessionId),{Ua:1800,Rb:"Lax",domain:e});-1===document.cookie.indexOf("wt_mcp_sid=".concat(this.sessionId))&&
Ib("wt_mcp_sid","".concat(this.sessionId),{Ua:1800,Rb:"Lax"})}catch(k){D.error("retrieving session cookie",k),D.H({af:a.trackId,F:a.h.eid,sessionId:this.sessionId,type:"error",I:"retrieving session cookie - ".concat(k.message)})}else D.error("Cookies are disabled");if(!b)try{var h=bb(this.Tb)||{}}catch(k){h={},D.log("retrieving serverconfig store error",k),D.H({af:a.trackId,F:a.h.eid,sessionId:this.sessionId,type:"error",I:"retrieving serverconfig store error - ".concat(k.message)})}D.log("serverdata: stored:",
h);u(h)&&(this.G=h)}c.prototype.get=function(a){D.log("serverConfig: retrieving data");if(null!==this.Va)return this.Va;this.Va=null;var b=this.G.thirdParty||this.j.h.eid,d=this.G[b]||{};!d.data||18E5<z()-(d.lastContact||0)?(D.log("serverConfig: creating new sessionId"),d={lastContact:0,data:null,ia:null}):z()>d.dataInvalidation&&(D.log("serverConfig: invalidating cache"),d.data=null);a.sessionId=this.sessionId;d.lastContact=z();this.G[b]=d;if(u(this.G[b].ia)){d=this.G[b].ia;delete this.G[b].ia;try{N(this.Tb,
this.G)}catch(f){D.error("Servercfg persist1 ".concat(f.message))}this.G[b].ia=d;return Promise.resolve(this.G[b].ia)}if(u(this.G[b].data)){try{N(this.Tb,this.G)}catch(f){D.error("Servercfg persist2 ".concat(f.message))}this.G[b].ia=Sb(this.G[b].data);return Promise.resolve(this.G[b].ia)}var e=this;return this.Va=(window.wt_masterExampleMockResponse?Promise.resolve(F(window.wt_masterExampleMockResponse)):Ub("".concat(this.j.Oc,"?cfg=1"),"POST",{trackId:this.j.trackId,divIds:[],placements:[],sessionId:a.sessionId,
pageId:a.zc,url:this.j.url,withConfig:!0,inputKeys:{eid:this.j.h.eid,geid:this.j.h.geid,cdbeid:this.j.h.cdbeid,newVisitor:this.j.h.newVisitor}})).then(function(f){try{var h=E(f).config||{}}catch(k){h="serverCfg parsing - ".concat(k.message),D.error("error parsing serverCfg",k),-1!==f.indexOf("<!DOCTYPE html")&&(h="serverCfg parsing response was a html doc"),D.H({trackId:e.j.trackId,F:b,type:"error",I:h,sessionId:a.sessionId,X:e.j.W}),h={}}e.Va=null;D.log("Got requested config data",h);h.deid&&h.deid!==
b&&(delete e.G[b],b=h.deid,e.G[b]={lastContact:z(),data:null,dataInvalidation:0},e.G.thirdParty=b);e.G[b].data=h;e.G[b].dataInvalidation=z()+18E5;delete e.G[b].ia;try{N(e.Tb,e.G)}catch(k){D.error("Servercfg persist3 ".concat(k.message))}e.G[b].ia=Sb(h);return e.G[b].ia}).catch(function(f){D.error("error retrieving serverCfg",f);D.H({trackId:e.j.trackId,F:b,type:"error",I:"serverCfg thenCatch - ".concat(f),sessionId:a.sessionId,X:e.j.W});return Sb({})})};return c}(),Symbol=function(){function c(a){var b=
this;this.gb=!1;this.type=a.type||"string";this.name=a.name||"";this.count=a.count||0;this.value="undefined"===typeof a.value?null:a.value;this.dc=0;this.g={};L("pageChange",function(){b.value=null;b.count=0;b.dc=0;b.$=0})}c.prototype.get=function(){for(var a=0;a<arguments.length;a++);return this.value};c.prototype.Gc=function(a){this.g=a};c.prototype.update=function(){return this.g};c.prototype.clear=function(){this.value=null;this.$=this.dc=this.count=0};return c}(),Wb=function(c){function a(){var b=
c.call(this,{type:"binary",name:"exit-intent"})||this;if(B())return b;b.gb=!0;b.tc=0;b.qc=ib();b.nd=-1!==jb().search("Trident")||-1!==jb().search("MSIE");b.Ea=!0;b.Ld=5;b.rd=2;b.timeout=null;if(b.qc&&!(9<=kb()))return D.error("exit-intent behavior supported for ie 9+ only"),b;if(b.nd||b.qc)b.Ld=25;b.nd&&(b.rd=-1);L("soloTab",function(d){b.Ea=d});J(document.documentElement,"mousemove",function(d){b.tc=d.clientY});J(document.documentElement,"mouseout",function(d){b.Je(d)});return b}g(a,c);a.prototype.O=
function(){var b=this;D.log("ExitIntent: detected mouseout");this.value=1;this.count+=1;K("symbolUpdate",[this.name]);this.timeout&&window.clearTimeout(this.timeout);this.timeout=window.setTimeout(function(){b.value=0;b.timeout=null},500)};a.prototype.ff=function(b){return b<this.Ld&&-40<b&&this.tc-b>this.rd};a.prototype.Je=function(b){var d=b.relatedTarget;this.Ea?this.ff(b.clientY)&&(this.qc?30>this.tc&&(!d||this!==d||"HTML"===d.nodeName)&&this.O():d&&"HTML"!==d.nodeName||this.O()):D.info("ExitIntent: suppressed not solo")};
return a}(Symbol),Xb=function(c){function a(){var b=c.call(this,{type:"number",name:"engagement"})||this;b.gb=!0;b.ed=z();if(B())return b;b.qa=!0;b.ac=null;L("leaderTab",function(d){b.qa!==d&&(b.qa=d,window.clearInterval(b.ac),b.ac=null,b.value=0,d&&b.zd())});b.zd();return b}g(a,c);a.prototype.zd=function(){var b=this;this.ed=z();this.ac=window.setInterval(function(){b.O()},1E3)};a.prototype.O=function(){this.value=(z()-this.ed)/1E3;this.count=1;K("symbolUpdate",[this.name])};return a}(Symbol),Yb=
function(c){function a(){var b=c.call(this,{type:"number",name:"inactivity"})||this;b.gb=!0;b.sc=z();if(B())return b;b.qa=!0;var d=0;L("activity",function(){window.clearInterval(d);b.qa&&(b.sc=z(),d=window.setInterval(function(){b.O()},1E3))});L("leaderTab",function(e){b.qa!==e&&(b.sc=z(),b.qa=e)});return b}g(a,c);a.prototype.O=function(){this.qa&&(this.value=(z()-this.sc)/1E3,this.count=1,K("symbolUpdate",[this.name]))};return a}(Symbol);function Zb(c,a){return c.call.apply(c.bind,[c,a])}
function $b(c,a){if(!c)throw Error();return function(){return c.apply(a,[c,a])}}function ac(c,a){return(Function.prototype.bind&&-1!==Function.prototype.bind.toString().indexOf("native code")?Zb:$b).apply(null,[c,a])}
var bc=function(){function c(){}c.clear=function(a){window.clearTimeout(a)};c.Qa=function(a,b,d){if("function"===typeof a)d&&(a=ac(a,d));else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:window.setTimeout(a,b||0)};return c}(),cc=function(){function c(a,b,d){this.ob=!1;this.kb=0;this.cc=[];this.listener=null!==d?ac(a,d):a;this.interval=b;this.Uc=ac(this.Ge,this)}c.prototype.hd=function(a){this.cc=arguments;this.ob=!1;this.rb?this.Pb=z()+this.interval:this.rb=bc.Qa(this.Uc,
this.interval)};c.prototype.stop=function(){this.Yc();this.Pb=null;this.ob=!1;this.cc=[]};c.prototype.pause=function(){++this.kb};c.prototype.resume=function(){this.kb&&(--this.kb,!this.kb&&this.ob&&this.bd())};c.prototype.Ge=function(){this.Yc();this.Pb?(this.rb=bc.Qa(this.Uc,this.Pb-z()),this.Pb=null):this.kb?this.ob=!0:this.bd()};c.prototype.Yc=function(){this.rb&&(bc.clear(this.rb),this.rb=null)};c.prototype.bd=function(){this.ob=!1;this.listener.apply(null,this.cc)};return c}(),dc=function(c){function a(b){function d(){}
var e=c.call(this,{type:"binary",name:b,value:0})||this;e.gb=!0;e.timeout=null;b=e.name;switch(e.name){case "blur":d=function(){e.O()};break;case "focus":var f=z(),h=!1;d=function(){(h=h||2E3<=z()-f)&&e.O()};break;case "scroll-up":case "scroll-down":b="scroll";var k=0,l=new cc(function(){var m=window.scrollY||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,n=k-m;k=m;200<Math.abs(n)&&"scroll-".concat(0<n?"up":"down")===e.name&&e.O()},100,e);d=function(){l.hd()}}J(window,
b,function(){d()});return e}g(a,c);a.prototype.O=function(){var b=this;D.info("Action: detected action ".concat(this.name));this.value=1;this.count+=1;K("symbolUpdate",[this.name]);this.timeout&&window.clearTimeout(this.timeout);this.timeout=window.setTimeout(function(){b.value=0;b.timeout=null},500)};return a}(Symbol),ec={value:null,lastValue:null,count:0},fc=function(c){function a(b){b=c.call(this,b)||this;b.$=0;return b}g(a,c);a.prototype.get=function(b,d){void 0===b&&(b="visit");void 0===d&&(d=
"value");if("visit"===b)return"elapsed"===d?0===this.g.last?-1:Math.floor((z()-this.g.last)/1E3):this.g[d];switch(d){case "value":return this.value;case "count":return this.count;case "average":return this.dc;case "elapsed":return 0===this.$?-1:Math.floor((z()-this.$)/1E3)}return null};a.prototype.update=function(){return this.g};a.prototype.Gc=function(b){this.g=b};return a}(Symbol),gc=function(c){function a(b,d,e){void 0===e&&(e={value:null});b=c.call(this,{type:d,name:b,value:e.value})||this;b.g=
{value:e.value||null};return b}g(a,c);a.prototype.update=function(b){if(this.value||"undefined"===typeof b)return this.g;this.value=x(b)?b.toLowerCase():b;this.g.value=this.value;return this.g};return a}(fc),hc=function(c){function a(b,d){b=c.call(this,{type:"prediction",name:b})||this;b.g={symbols:d.symbols||[],fn:d.fn||null,value:"",count:0,last:0};b.$=0;return b}g(a,c);a.prototype.get=function(){function b(){}if(!this.g.fn||"string"!==typeof this.g.fn)return null;try{b=new Function("data","".concat(this.g.fn,
" return computeScore(data);"))}catch(d){D.error("error parsing prediction function ".concat(this.name),d),D.H({type:"error",I:"prediction function ".concat(this.name," parsing - ").concat(d.message)})}return{symbols:this.g.symbols,fn:b}};return a}(Symbol),ic=function(c){function a(b,d){void 0===d&&(d=ec);b=c.call(this,{type:"number",name:b})||this;b.g={value:d.value||null,lastValue:d.lastValue||null,count:d.count||0,last:d.last||0};b.g.average=b.g.value/b.g.count||0;b.$=0;b.xc=-1!==b.name.indexOf("customSessionParameter")||
-1!==b.name.indexOf("urmCategory");return b}g(a,c);a.prototype.update=function(b,d){var e=this;void 0===d&&(d=1);if("undefined"===typeof b)return this.g;this.count=d;this.value=Number(b);u(b)&&!v(b)?(this.value=Number(b.value),this.count=b.count||1):v(b)&&(this.value=0,this.count=d||0,H(b,function(f){f=Number(f);w(f)&&(e.count+=1,e.value+=f)}));if(isNaN(this.value))return this.count=this.value=0,this.g;this.$=z();this.g.last=this.$;this.g.count+=this.count;null===this.g.value&&(this.g.value=0);this.g.value=
this.xc?this.value:this.g.value+this.value;this.g.lastValue=this.value;this.g.average=this.g.value/this.g.count||0;return this.g};return a}(fc),jc=function(c){function a(b,d){void 0===d&&(d=ec);b=c.call(this,{type:"binary",name:b})||this;b.g={value:d.value||null,lastValue:d.lastValue||null,count:d.count||0};return b}g(a,c);a.prototype.update=function(b,d){void 0===d&&(d=1);if("undefined"===typeof b)return this.g;this.count=d;this.value=Number(b);this.$=z();if(isNaN(this.value))return this.count=this.value=
0,this.g;this.g.value=Number(b);this.g.lastValue=Number(b);this.g.count+=1;this.g.last=this.$;return this.g};return a}(fc),kc=function(c){function a(b,d,e){void 0===d&&(d=ec);void 0===e&&(e="visit");b=c.call(this,{type:"string",name:b})||this;b.context=e;b.g={value:d.value||[],lastValue:d.lastValue||null,count:d.count||0,last:d.last||0};b.$=0;b.xc=-1!==b.name.indexOf("customSessionParameter")||-1!==b.name.indexOf("urmCategory");return b}g(a,c);a.prototype.update=function(b,d){var e=this;void 0===
d&&(d=1);if("undefined"===typeof b)return this.g;var f=b;u(b)&&!v(b)&&(f=b.value,d=b.count||1);this.value=f=v(f)?I(f,function(h){return x(h)?h.toLowerCase():String(h)}):x(f)?f.toLowerCase():String(f);this.count=d;b=v(this.value)?this.value:[this.value];this.$=z();this.g.last=this.$;this.g.count+=this.count;v(this.g.value)||(this.g.value=null===this.g.value?[]:[this.g.value]);H(b,function(h){h&&(e.g.value.push(h),100<e.g.value.length&&e.g.value.shift(),sa(e.g.value))});b=this.g.value.length;0<b&&(b=
this.g.value[b-1],this.xc&&(this.g.value=[b]),this.g.lastValue=b);return this.g};return a}(fc),lc="mousemove mousedown mousewheel wheel touchstart touchmove keydown".split(" "),mc=function(){function c(){this.Kb=0;this.qa=this.Ea=!0;this.kc=this.qd=0;this.K=[];this.Ad=String(z()+Math.random())}c.prototype.yd=function(a){20<this.kc||(N("wt.mcp.lscom","".concat(this.Ad,"|").concat(a,"|").concat(this.Kb++))?this.kc=0:this.kc++)};c.prototype.stop=function(){window.clearInterval(this.interval);H(this.K,
function(a){Da(a)});this.K=[];this.interval=null;this.Kb=0};c.O=function(a,b){K(a,b)};c.prototype.start=function(){var a=this;if(!B())if(!ab.pc())D.error("Crosstab deactivating no storage found");else if(!(0<this.Kb)){this.Kb=1;this.K.push(J(window,"storage",function(d){if("wt.mcp.lscom"===d.key){var e=[];try{e=d.newValue.split("|")}catch(f){D.error("crosstab couldn't recieve new ping ".concat(d.newValue));return}e[0]!==a.Ad&&(a.qd=z(),d=e[1],c.O(d,!0),"activity"===d&&a.qa&&c.O("leaderTab",!1))}}));
var b=new cc(function(){c.O("activity",!0);a.yd("activity");c.O("leaderTab",!0)},500,this);this.K.push(J(document,lc,function(d){b.hd(d)}));this.interval=window.setInterval(function(){a.qd<z()-1250?a.Ea||(a.Ea=!0,c.O("soloTab",!0)):a.Ea&&(a.Ea=!1,c.O("soloTab",!1));a.yd("ping")},500)}};return c}(),U=new (function(){function c(){this.Ib={};this.fc=""}c.Ga=function(a){return a?x(a)?a.replace(/;$/,"").split(";"):w(a)?[a]:[]:[]};c.prototype.lc=function(a,b,d){var e="undefined"===typeof a.cid?0:1;-1!==
["0","undefined","null","empty","none"].indexOf(a.cid)&&(e=0);var f=a.couponValue;f&&!isNaN(f)&&(f=Number(f));return{eid:a.eid,cid:e,"content-id":d||a.contentId,referrer:a.referrer,mediacode:a.mediacode,keyword:a.keyword,"link-id":a.linkId,"search-phrase-internal":a.searchPhraseInternal,url:window.location.href,currency:a.currency,"new-visitor":a.newVisitor?1:0,product:a.product,productPrice:a.productPrice,productQuantity:a.productQuantity,"product-sold-out":"undefined"===typeof a.productSoldOut?
0:1,productAction:a.productAction,orderId:a.orderId,orderValue:a.orderValue,coupon:f,country:a.country,region:a.region,city:a.city,zip:a.zip,operatingSystem:a.operatingSystem,deviceClass:a.deviceClass,"opt-out":"undefined"!==typeof b.optOut?Number(b.optOut):b.optOut}};c.prototype.Dc=function(a){var b="product-viewed";"buy"===a.productAction?b="product-ordered":"add"===a.productAction&&(b="product-added");return b};c.prototype.Ac=function(a,b,d){H("productCategory contentGroup customParameter customCampaignParameter customEcommerceParameter customSessionParameter customClickParameter urmCategory crmCategory".split(" "),
function(e){var f=a[e];if(f){var h="productCategory"===e?"product-category":e;b[h]=[];for(var k in f)f.hasOwnProperty(k)&&("productCategory"===e&&d&&(b["".concat(d,"-category-").concat(k)]=c.Ga(f[k])),b["".concat(e,"-").concat(k)]=c.Ga(f[k]),b[h]=b[h].concat(c.Ga(f[k])))}});b.product&&(b["product-name"]=c.Ga(b.product),b["".concat(d,"-name")]=b["product-name"])};c.prototype.parse=function(a,b){var d=this;if("list"===a.productAction)return D.error("Pixel: productAction list not implemented yet!"),
{};var e=a.contentId;x(e)&&(e=Oa(e));var f=a.linkId;"undefined"!==typeof f&&(D.info("Pixel: action request parsing ".concat(a.linkId)),e=this.fc,-1!==["wt_ignore","webtrekk_ignore"].indexOf(f)&&delete a.linkId);D.log("Pixel: rawAttrs:",a);f=this.lc(a,b,e);b=this.Dc(f);this.Ac(a,f,b);var h={};e&&e!==this.fc?(D.info("Pixel: page change detected ".concat(e)),h=da(f),this.fc=e,h["page-impression"]=1,this.Ib={},K("pageChange",!0)):(D.info("Pixel: page update detected"),t(f,function(n,y){var q=d.Ib[y];
if(v(q)){a:if(q.length!==n.length)q=!1;else{for(var C=q.length,Q=0;Q<C;Q++)if(q[Q]!==n[Q]){q=!1;break a}q=!0}q||(h[y]=n)}else if(u(q)){a:{for(C in q)if(!(C in n)||q[C+""]!==n[C+""]){q=!1;break a}for(C in n)if(!(C in q)){q=!1;break a}q=!0}q||(h[y]=n)}else q!==n&&(h[y]=n)}),h.productAction&&(h.product=f.product,h.productPrice=f.productPrice,h.productQuantity=f.productQuantity,h.productAction=f.productAction),D.info("Pixel: cleaned list",h,this.Ib));this.Ib=da(f);if(r(h))return D.log("Pixel: nothing to update"),
h;if(h.product){D.log("Pixel: updating product: ".concat(b));h[b]={value:0,count:0};e=c.Ga(h.productPrice);f=c.Ga(h.productQuantity);for(var k=Math.max(e.length,f.length),l=0;l<k;l++){var m=f.length>l?parseInt(String(f[l])):1;h[b].value+=e.length>l?parseFloat(String(e[l])):0;h[b].count+=m}h["product-name"]=c.Ga(h.product);h["".concat(b,"-name")]=h["product-name"];delete h.product;delete h.productPrice;delete h.productQuantity;delete h.productAction}D.log("Pixel (input/output)",a,h);return h};return c}()),
V=new (function(){function c(){this.ra={};this.g=null;this.J=[];this.hc=new mc;this.K={Kd:!1,storage:!1}}c.prototype.Ec=function(){D.log("store: saving visit data to localStorage");B()||(this.g["last-access"]=z(),ab.pc()?(ab.Nc(this.g),N("wt.mcp.visit",this.g)):D.error("Store cant saveStore no storage found"))};c.prototype.Gd=function(a,b){var d=this;void 0===b&&(b=!1);var e=[];t(a,function(f,h){if("last-access"!==h&&u(f)){var k=d.g&&d.g[h];if(!(k&&k.last>=f.last)){if(-1!==d.J.indexOf(h)){if(!la(d.ra[h].Gc)||
d.ra[h].gb||!f.last)return;d.ra[h].Gc(f)}else d.J.push(h),d.Xa(h,f.type,"visit",f);e.push(h)}}});0===e.length?D.log("store: visitStore update didnt contain any new data"):(D.log("store: updating visit store with localStorage content for ".concat(e)),this.g=a,K("symbolUpdate",e),b&&this.Ec())};c.prototype.df=function(a){var b=this,d=a;v(d)||(d=[a]);var e=!1;H(d,function(f){x(f.name)&&-1===b.J.indexOf(f.name)&&(b.J.push(f.name),f.data?b.Xa(f.name,f.type,f.store,f.data):b.Xa(f.name,f.type,f.store),e=
!0)});e&&D.info("store: new updated whitelist (".concat(this.J,")"))};c.prototype.Hd=function(a,b,d){"undefined"!==typeof b&&x(a)&&u(this.ra[a])&&(ca(this.g[a],this.ra[a].update(b,d)),K("symbolUpdate",[a]),this.Ec())};c.prototype.ja=function(a,b,d){return x(a)&&u(this.ra[a])?this.ra[a].get(b,d):null};c.prototype.Xa=function(a,b,d,e){void 0===d&&(d="visit");e=e||this.g[a];switch(a){case "exit-intent":this.hc.start();d=new Wb;break;case "engagement":this.hc.start();d=new Xb;break;case "inactivity":this.hc.start();
d=new Yb;break;case "blur":case "focus":case "scroll-up":case "scroll-down":d=new dc(a);break;case "opt-out":case "new-visitor":case "country":case "region":case "city":case "zip":case "cid":case "operatingSystem":case "deviceClass":d=new gc(a,b,e);break;default:d="prediction"===b?new hc(a,e):"number"===b?new ic(a,e):"binary"===b?new jc(a,e):new kc(a,e,d)}null!==d&&(this.ra[a]=d,this.g[a]||(this.g[a]=d.g,this.g[a].type=b))};c.prototype.ce=function(a){var b=this;D.log("Store creating store for ".concat(a));
if(null!==this.g)return Promise.resolve(this.g);this.g={};return ab.Ue(a).catch(function(d){D.error("store: loading crossdomain localStorage -> working locally",d);return{}}).then(function(d){L("updateVisitStore",function(f){b.Gd(f,!0)});try{b.g=bb("wt.mcp.visit")||{}}catch(f){D.error("symbolStore getting visit store",f),b.g={},D.H({type:"error",I:"symbolStore getting visit store - ".concat(f.message)})}var e=!1;u(d)&&(d["last-access"]>b.g["last-access"]||!b.g["last-access"])?(D.info("store: version retrieved from iframe is newer than current one",
d),b.g=d):(D.info("store: local version is newer than retrieved one",b.g),e=!0);u(b.g)||(b.g={});18E5<z()-b.g["last-access"]&&(b.g={});e&&!r(b.g)&&ab.Nc(b.g);t(b.g,function(f,h){"last-access"!==h&&(b.J.push(h),b.Xa(h,f.type,"visit",f))});b.K.Kd||(b.K.Kd=!0,L("updateWhiteList",function(f){b.df(f)}));b.K.storage||(b.K.storage=!0,J(window,"storage",function(f){if("wt.mcp.visit"===f.key){D.log("store: detected change in localStorage");f=null;try{f=bb("wt.mcp.visit")||{}}catch(h){D.error("storageEvent: getting visit store",
h),D.H({type:"error",I:"storageEvent getting visit store - ".concat(h.message)})}u(f)&&b.Gd(f)}}));return b.g})};c.prototype.Bc=function(a,b,d){var e=this;void 0===a&&(a={});void 0===b&&(b={});void 0===d&&(d={});D.log("store: parsing inputKeys",a,b,d);var f={};ca(f,a,b);f=U.parse(f,d);var h=[];t(this.J,function(k){var l=f[k];if("undefined"!==typeof l){var m=e.ra[k];m?(l=m.update(l),B()||(e.g[k]?ca(e.g[k],l):(e.g[k]=l,D.error("store: a symbol has been update which didnt exist in visit object!"))),
h.push(k)):D.error("store: couldnt find symbol instance from whitelist")}});0!==h.length&&(D.log("sending symbol update for ".concat(h)),this.Ec(),K("symbolUpdate",h))};return c}()),nc={Ja:"",Wa:"",cmp:"",xd:"",content:""};function oc(c){var a=null,b={};try{b=E(decodeURIComponent(Jb("wt_mcp_optin","{}")))}catch(d){}"undefined"!==typeof b[c]&&(a=b[c]);return a}
function pc(c,a){var b={};try{b=E(decodeURIComponent(Jb("wt_mcp_optin","{}")))}catch(e){}b[a]=c;c="{}";try{c=F(b)}catch(e){}c=encodeURIComponent(c);b=0;a=document.domain;for(var d=a.split(".");b<d.length-1&&-1===document.cookie.indexOf("wt_mcp_optin=".concat(c));)a=d.slice(-1-++b).join("."),Ib("wt_mcp_optin",c,{Ua:86400,Rb:"/;SameSite=Lax",domain:a});-1===document.cookie.indexOf("wt_mcp_optin=".concat(c))&&Ib("wt_mcp_optin",c,{Ua:86400,Rb:"/;SameSite=Lax"})}
function qc(c){var a=c.P;if(c.vc&&c.Ha){var b=null,d=oc(c.Ha);D.info("clientRule.preprocessOptIn: ".concat(c.m.cmp," current opt-in status > ").concat(d,"."),void 0,a);"object"===typeof a.h&&"object"===typeof a.h.urmCategory&&"string"===typeof a.h.urmCategory[c.Lb]?b=a.h.urmCategory[c.Lb]:"object"===typeof c.na&&"string"===typeof c.na[c.Ha]&&null===d&&(b=c.na[c.Ha]);d===b||"1"!==b&&"0"!==b||(D.info("clientRule.preprocessOptIn: ".concat(c.m.cmp," update/set opt-in status > ").concat(b,".")),pc(b,c.Ha));
"MCP"===c.type&&"1"===b&&window.setTimeout(function(){c.evaluate()},10)}}var W=[],X;function rc(c){if(!c)return c;var a="^";H(c.split(""),function(b){switch(b){case "*":a+=".*";break;case "?":a+=".?";break;case "(":case ")":case "[":case "]":case "$":case "^":case ".":case "{":case "}":case "|":case "\\":a+="\\".concat(b);break;default:a+=b}});return a+="$"}
function sc(c){var a=/(?:-(value|count|average|elapsed))?(?:-(last|session))?(?:-(number|binary|string))?$/,b=c.v.match(a);b&&3<=b.length&&(c.v=c.v.replace(a,""),b[2]&&(c.store="session"!==b[2]?"page":"visit"),b[1]&&(c.op=b[1]),b[3]&&(c.t=b[3]));return c}
function tc(c){var a=[];H(c.i,function(b){b=sc({v:b});a.push({v:b.v,op:b.op,store:b.store,type:b.t});-1===X.J.indexOf(b.v)&&(X.J.push(b.v),W.push({name:b.v,type:b.t,store:b.store}))});-1===X.J.indexOf(c.v)&&(X.J.push(c.v),W.push({name:c.v,type:c.t,store:c.store,data:{fn:c.c,symbols:a}}))}
function uc(c,a,b){if(c){var d=c.t;if("prediction"===d&&c.v)tc(c);else if("identifier"===d&&c.v)c=sc(c),-1===X.J.indexOf(c.v)&&(X.J.push(c.v),W.push({name:c.v,type:a.r.t,store:c.store})),"elapsed"===c.op&&X.Bd.push({name:c.v,store:c.store,Qe:a,value:a.r.v,Xd:a.t});else if("combine"===d&&c.metric){if(c.metric.l&&c.metric.l.v){a=c.metric;b=(b||0)+1;var e={wb:0,label:"",oa:"".concat(X.data.tb,"-combined-").concat(b),tb:"".concat(X.data.tb,"-combined-").concat(b),Y:c.data,action:{type:"COMBINED",Fe:a.l.v},
m:{cmp:""}};uc(a,c,b);c.t=a.t;c.l={t:"identifier",v:"".concat(X.data.tb,"-combined-").concat(b)};c.r={t:"number",v:a.r.v};delete c.data;delete c.metric;-1===X.J.indexOf(e.oa)&&(X.J.push(e.oa),W.push({name:e.oa,type:"number",store:"visit"}));X.jb.clientRules[e.oa]||(X.jb.clientRules[e.oa]=new vc(e,X.P,X.jb,X.na))}}else-1!==["binary","number","string"].indexOf(d)?"string"===c.t&&(b=c.v,-1!==["contains","nc"].indexOf(a.t)&&(b="*".concat(b,"*")),c.v=rc(b).toLowerCase()):(e=e?e:b,uc(c.l,c,e),uc(c.r,c,
e))}}function wc(c){W=[];X=c;X.J=[];H(X.dd,function(a){-1===X.J.indexOf(a.name)&&(X.J.push(a.name),W.push(a))});X.Y&&uc(X.Y,X.Y);K("updateWhiteList",W)}
var xc=new (function(){function c(){var a=this;this.td={and:function(b){var d=a.evaluate(c.right(b));"undefined"===typeof c.right(b)&&(d=!0);return d&&a.evaluate(c.left(b))},or:function(b){return a.evaluate(c.left(b))||a.evaluate(c.right(b))},gt:function(b){return a.evaluate(c.left(b))>a.evaluate(c.right(b))},lt:function(b){return a.evaluate(c.left(b))<a.evaluate(c.right(b))},eq:function(b){return a.xb(c.left(b),c.right(b))},ne:function(b){return!a.xb(c.left(b),c.right(b))},nc:function(b){return!a.xb(c.left(b),
c.right(b))},contains:function(b){return a.xb(c.left(b),c.right(b))},identifier:function(b){return V.ja(b.v,b.store,b.op)},string:function(b){if("string"!==typeof c.value(b))throw Error("literal string not string");return c.value(b)},number:function(b){if("number"!==typeof c.value(b))throw Error("literal number not number");return c.value(b)},prediction:function(b){var d=V.ja(b.v,b.store,b.op);if(null===d||d&&"function"!==typeof d.fn)throw Error("prediction function not function");var e={};H(d.symbols,
function(h){e[h.v+"-".concat(h.op).concat("visit"===h.store?"-session-":"-last-").concat(h.type)]=V.ja(h.v,h.store,h.op)});try{D.info("execute prediction ".concat(b.v),e);var f=d.fn(e);D.display(b.v,f,e)}catch(h){D.error("error executing prediction function ".concat(b.v),h),D.H({type:"error",I:"prediction function ".concat(d.name," executing - ").concat(h.message)})}return f}}}c.prototype.xb=function(a,b){a=this.evaluate(a);b=this.evaluate(b);if("undefined"===typeof a&&a===b)return!1;if(v(a)){for(var d=
a.length;d--;){var e=a[d];if(x(e)&&(e===b||-1!==e.search(b)))return!0}return!1}return x(a)?a===b||-1!==a.search(b):b==a};c.left=function(a){return a.l};c.right=function(a){return a.r};c.value=function(a){return a.v};c.prototype.evaluate=function(a){if(!u(a))return!1;var b=this.td;if(!(null!==b&&a.t in b))throw Error("bad rule type ".concat(a.t));b=this.td[a.t](a);if(O){var d="".concat(a.t," node");a.l&&a.r&&a.l.v&&a.r.v&&(d="".concat(a.l.v," ").concat(a.t," ").concat(a.r.v));D.info("evaluating rule; ".concat(d,
" => '").concat(b,"'"),a)}return b};return c}()),yc=[],zc=null,Ac=function(){function c(a,b,d){D.info("TeaserHandler.ctor");a.data.Ma&&a.data.Na?(this.configuration=a,this.item=a.item,this.ga=a.ga||a.item,this.data={L:a.data,B:a.B},this.Ta="1"===d,this.type=b,this.V=a.V,this.Md={titlePlacement:["520","rank"],titleTeaser:["521","name"],type:["522","type"],views:["523",""],clicks:["524",""],pi:["525","pi"],titleCampaign:["526","content"],variant:["527","variant"],conf:["528","conf"],requestId:["529",
"requestId"],targetGroup:["530","targetGroup"],rule:["531","rule"],itemPage:["532","itemPage"],itemPosition:["533","itemPosition"],conversionType:["","cType"],conversionGoal:["","cGoal"],conversionValue:["","cValue"]},this.Nd=this.Ta?0:1,this.Re(),this.Id(this.data.L),this.Id(this.data.B),this.item||"manual"===this.type||(D.log("TeaserHandler.ctor: passed item not present in DOM, switching to type manual"),this.type="manual"),"manual"!==this.type&&(this.Ta&&this.item.setAttribute(this.configuration.vb,
F({ck:this.Cb()})),null===this.ga.parentNode?this.interval=this.setInterval():this.Y())):D.error("TeaserHandler.ctor: faulty configuration (titlePlacement and/or titleTeaser)",a.data.Ma,a.data.Na)}c.prototype.Re=function(){D.info("TeaserHandler._setConversionData");switch(this.type){case "reco":this.data.B.type=this.data.B.type?this.data.B.type:"product";this.data.B.da=this.data.B.da?this.data.B.da:"order";this.data.B.value=this.data.B.value?this.data.B.value:"";break;case "overlay":this.data.B.type=
this.data.B.type?this.data.B.type:"view";this.data.B.da=this.data.B.da?this.data.B.da:"goal";this.data.B.value=this.data.B.value?this.data.B.value:"1";break;case "banner":case "custom":this.data.B.type=this.data.B.type?this.data.B.type:"click";this.data.B.da=this.data.B.da?this.data.B.da:"both";this.data.B.value=this.data.B.value?this.data.B.value:"1";break;case "manual":D.info("TeaserHandler.setConversionData: no default values for current type '".concat(this.type,"'"));break;default:D.error("TeaserHandler.setConversionData: unknown type '".concat(this.type,
"'"))}};c.prototype.Id=function(a){t(a,function(b,d){"undefined"===typeof b||null===b?a[d]="":"number"===typeof b&&(a[d]=String(a[d]))})};c.prototype.setInterval=function(){var a=this;D.info("TeaserHandler._setInterval");return window.setInterval(function(){null!==a.ga.parentNode&&(window.clearInterval(a.interval),D.info("TeaserHandler._setInterval: found parent element (parent)",[a.ga.parentNode]),a.Y())},100)};c.prototype.C=function(a){return this.Md[a][this.Nd]};c.prototype.Cb=function(a){var b=
{};b[this.C("titlePlacement")]=this.data.L.Ma;b[this.C("titleTeaser")]=this.data.L.Na;b[this.C("type")]=this.data.L.type;this.Ta&&(b[this.C("views")]="view"===this.data.L.type?"1":"",b[this.C("clicks")]="click"===this.data.L.type?"1":"","click"===this.data.L.type||"view"===this.data.L.type)&&(b[this.C("type")]="");b[this.C("conf")]="";b[this.C("pi")]=this.data.L.He;b[this.C("titleCampaign")]=this.data.L.La;b[this.C("variant")]=this.data.L.variant;b[this.C("requestId")]=this.data.L.requestId;b[this.C("targetGroup")]=
this.data.L.Xe;b[this.C("rule")]=this.data.L.Pe;b[this.C("itemPage")]=this.data.L.Ee;b[this.C("itemPosition")]=this.data.L.od;!this.Ta&&a&&(b[this.C("conversionType")]=this.configuration.ib.ub?"view":this.data.B.type,b[this.C("conversionGoal")]=this.data.B.da,b[this.C("conversionValue")]=this.data.B.value);return b};c.prototype.ib=function(a){D.info("TeaserHandler.manual: sending tracking data for ".concat(this.data.L.La));if(this.Ta)if(D.info("TeaserHandler.manual: detected V1 teaser tracking plugin"),
a.tt&&la(a.tt.addClickParameter)){var b=this.Cb();a.tt.addClickParameter(b[this.C("titlePlacement")],b[this.C("titleTeaser")],b[this.C("type")],b[this.C("views")],b[this.C("clicks")],b[this.C("pi")],b[this.C("titleCampaign")],b[this.C("variant")],b[this.C("conf")],this.configuration.ib.ub,b[this.C("requestId")],b[this.C("targetGroup")],b[this.C("rule")],b[this.C("itemPage")],b[this.C("itemPosition")])}else D.error("couldn't send tracking data for ".concat(this.data.L.La," -> no tracking pixel"),a);
else a=this.V,window[a]=window[a]||[],window[a].push([this.data.L.type,this.Cb(!0)])};c.prototype.Y=function(){D.info("TeaserHandler.trigger");if(this.Ta){if(na(window,"wt_tt","tt")){var a=window.wt_tt.tt;la(a.searchTeaser)&&a.searchTeaser();la(a.setScrollPos)&&a.setScrollPos()}}else a=this.V,window[a]=window[a]||[],window[a].push({selector:this.item,exclude:[],data:this.Cb(),conversion:this.data.B})};return c}();
function Bc(){return{item:null,ga:null,ib:{ub:!1},data:{Ma:"",Na:"",type:"",He:"",La:"",variant:"",requestId:"",Xe:"",Pe:"",Ee:"",od:""},B:{type:"",da:"",value:""},vb:"",V:"wt_ttv2"}}function Cc(c,a,b){D.info("wt.mcp.teaserHandler.create",c,a,b);try{return new Ac(c,a,b)}catch(d){return D.error("wt.mcp.teaserHandler.create: ".concat(d)),null}}
function Dc(c,a,b){D.info("invokeTeaserTracking (mcpState, options, teaserVersion)",c,a,b);if(c.X||"1"!==b){var d=Bc();d.data.type=a.Zd?"click":"view";d.ib.ub=!0===a.ub;d.data.Ma=a.Ie;d.data.Na=a.ae;d.data.La=a.ec;d.data.variant=a.variant?a.variant:"campaign";d.item=a.item;d.B.da="both";d.B.value="1";d.V=a.V;if(d=Cc(d,a.Ka||"manual",b))try{d.ib(c.X)}catch(e){D.error("invokeTeaserTracking: ".concat(e))}}else D.info("couldn't send tracking data for ".concat(a.ec," -> no pixel; polling for it")),yc.push(a),
null===zc&&(zc=window.setInterval(function(){c.X&&(D.info("found a pixel instance; sending queued tracking requests"),window.clearInterval(zc),zc=null,yc.forEach(function(e){D.log("sending queued tracking data for ".concat(a.ec));Dc(c,e,b)}),yc=[])},1E3))}var Ec=Dc,Fc=function(){function c(a,b){this.width=a;this.height=b}c.he=function(a,b){return a===b?!0:a&&b?a.width===b.width&&a.height===b.height:!1};return c}();
function Gc(c){var a=M.A("style",{type:"text/css"});try{a.styleSheet?a.styleSheet.cssText=c:a.textContent?a.textContent=c:document.createTextNode&&M.appendChild(a,document.createTextNode(c))}catch(b){}M.appendChild(M.se(),a)}function getComputedStyle(c,a){var b=document;return b.defaultView&&b.defaultView.getComputedStyle&&(c=b.defaultView.getComputedStyle(c,null))?c[a]||c.getPropertyValue(a)||"":""}function Hc(c){return"number"===typeof c?"".concat(Math.round(c),"px"):c}
function Ic(c,a){c.style.height=Hc(a)}function Jc(c,a){c.style.width=Hc(a)}function Kc(c,a){if("string"===typeof a)a&&(c.style[a]=void 0);else for(var b in a){var d=b+"";d&&(c.style[d]=a[b+""])}}var Lc=getComputedStyle;function Mc(c){Mc[" "](c);return c}Mc[" "]=function(){for(var c=0;c<arguments.length;c++);};var Nc=Mc;function Oc(){}
var Pc=document.createElement("webtrekk"),Qc={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},Y={end:""},Rc;for(Rc in Qc)if("undefined"!==typeof Pc.style[Rc+""]){Y.end=Qc[Rc+""]+"";break}
var Sc=!1,Tc=!1,Uc=function(){function c(a,b,d,e,f){void 0===f&&(f=Oc);this.Sb=this.pd=this.ca=this.R=null;this.va=!1;this.hb=[];this.id=a;this.type=b;this.cd="wt-mcp-ol-".concat(a);this.options=d;this.bf=e;this.Te=f;this.oc=String(z());Sc||(Sc=!0,Gc(".wt-mcp-ol-fade {opacity: 0;-webkit-transition: opacity .3s linear;transition: opacity .3s linear;}.wt-mcp-ol-fade.wt-mcp-ol-in {opacity: 1;}.wt-mcp-ol-modal-open {overflow: hidden;}.wt-mcp-ol-modal {position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 99050;overflow: auto;overflow-y: hidden;-webkit-overflow-scrolling: touch;outline: 0;}.wt-mcp-ol-modal.wt-mcp-ol-fade .wt-mcp-ol-modal-dialog {-webkit-transition: -webkit-transform .3s ease-out;-moz-transition: -moz-transform .3s ease-out;-o-transition: -o-transform .3s ease-out;transition: transform .3s ease-out;-webkit-transform: translate(0, -25%);-ms-transform: translate(0, -25%);transform: translate(0, -25%);}.wt-mcp-ol-modal.wt-mcp-ol-in .wt-mcp-ol-modal-dialog {-webkit-transform: translate(0, 0);-ms-transform: translate(0, 0);transform: translate(0, 0);}.wt-mcp-ol-modal-dialog {position: relative;width: auto;margin: 0 auto;padding: 20px;box-sizing: border-box;}.wt-mcp-ol-modal-content {position: relative;background-color: #fff;background-clip: padding-box;border-radius: 6px;outline: none;-webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, .5);box-shadow: 0 3px 9px rgba(0, 0, 0, .5);overflow: hidden;}.wt-mcp-ol-modal-backdrop {position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 99040;background-color: #000;}.wt-mcp-ol-modal-backdrop.wt-mcp-ol-fade {filter: alpha(opacity=0);opacity: 0;}.wt-mcp-ol-modal-backdrop.wt-mcp-ol-in {filter: alpha(opacity=50);opacity: .5;}@media (min-width: 768px) {.wt-mcp-ol-modal-dialog {width: 100%;margin: 30px auto;}.wt-mcp-ol-modal-content {-webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, .5);box-shadow: 0 5px 15px rgba(0, 0, 0, .5);}.wt-mcp-ol-modal-sm {width: 300px;}}@media (min-width: 992px) {.wt-mcp-ol-modal-lg {width: 900px;}}.wt-mcp-ol-modal-content {height: 400px;}.wt-mcp-ol-iframe {}.wt-mcp-ol-modal-close {position: absolute;top: 0.5rem;right: 0.5rem;width: 25px;height: 25px;border-radius: 50%;text-align: center;background-color: #000;}.wt-mcp-ol-modal-close > span:before {color: #fff;font-size: 20px;line-height: 1.3;font-family: Arial;content: '\\D7';}.wt-mcp-ol-modal-close:hover {text-decoration: none;opacity: 0.8;filter: alpha(opacity=80);cursor: pointer;}#wt_mcp_prediction {width: 30%;height: 30%;position: fixed;right: 1px;bottom: 1px;background: #8fbc13;border: 1px solid #97bf0d;overflow: scroll;border-radius: 10px;-moz-border-radius: 10px;-webkit-border-radius: 10px;box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);-webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);}"))}
c.prototype.vd=function(a){var b=this;H(a.getElementsByClassName("wt-mcp-ol-modal-close"),function(d){Ba(d,["click","touchend"],function(e){b.Eb(e)})});c.focus(a)};c.prototype.show=function(a){var b=this;if(!a&&Tc)return!1;Tc=!0;if(!this.R){D.log("Overlay: ".concat(this.id," wasnt preloaded, loading it now"));this.preload();if(this.Sb)return!0;this.Sb=window.setInterval(function(){b.R&&(window.clearInterval(b.Sb),b.Sb=null,b.show(!0))},10);return!0}if(this.va)return!1;this.va=!0;this.escape();this.Qc(function(){if(b.R){var d=
b.R;d.style.display="";Nc(d.offsetWidth);M.bc(d,"wt-mcp-ol-in");b.Te();b.ge();Y?(Ba(d,Y.end,function(){b.vd(d)}),c.jc(d)):b.vd(d)}});this.hb.push(J(window,"message",function(d){var e=d.data;"wt-mcp-close-modal"===e?(D.log("Overlay ".concat(b.id,": got close modal event"),d),b.Eb(d)):"wt-mcp-track-click"===e&&(D.log("Overlay ".concat(b.id,": got tracking event"),d),b.bf(!0))}));return!0};c.prototype.Eb=function(a){var b=this,d=this.R;a&&a.preventDefault();this.va&&(this.va=!1,this.escape(),this.Ed(),
M.Qb(d,"wt-mcp-ol-in"),Y.end?(Ba(d,Y.end,function(){b.ld()}),c.jc(d)):this.ld())};c.prototype.ge=function(){var a=this;Da(this.pd);this.pd=J(document,"focusin",function(b){"undefined"!==typeof b&&a.R&&a.R!==b.target&&!a.R.contains(b.target)&&c.focus(a.R)})};c.prototype.escape=function(){var a=this;if(this.va){var b=J(window,"keyup",function(d){27===d.keyCode&&a.Eb()});this.hb.push(b)}else this.va||Ca(this.R)};c.prototype.ld=function(){var a=this;this.R.style.display="none";this.Qc(function(){a.ca.parentNode.removeChild(a.ca);
Tc=!1;M.removeNode(a.R);a.Ed();a.R=null;a.oc=String(z())})};c.prototype.Qc=function(a){var b=this;if(a)if(this.va){this.ca=M.A("div",{id:"wt-mcp-ol-bd",className:"wt-mcp-ol-modal-backdrop wt-mcp-ol-fade"});M.appendChild(document.body,this.ca);var d=J(this.R,["click","touchend"],ac(function(e){e.target===e.currentTarget&&b.Eb()},this));this.hb.push(d);Nc(this.ca.offsetWidth);Kc(this.ca,{opacity:this.options.yc});Y?(Ba(this.ca,Y.end,a),c.jc(this.ca)):a()}else!this.va&&this.ca?(Kc(this.ca,{opacity:0}),
Y&&0!==this.options.yc?Ba(this.ca,Y.end,a):a()):a&&a()};c.prototype.preload=function(){var a=this,b=M.Bb(this.cd);if(b){if(b.getAttribute("data-inst")===this.oc)return;M.removeNode(b)}b=this.options.ke?"width: ":"max-width: ";var d=M.A("div",{id:this.cd,"class":"wt-mcp-ol-modal wt-mcp-ol-fade",tabIndex:"-1",style:"display: none","data-inst":this.oc}),e=[];this.options.height&&e.push("height: ".concat(this.options.height,"px"));this.options.width&&e.push("width: ".concat(this.options.width,"px"));
e=M.A("div",{"class":"wt-mcp-ol-modal-content",style:e.join("; ")});var f;"iframe"===this.type?f=M.A("iframe",{id:"wt-mcp-ol-iframe-".concat(this.id),"class":"wt-mcp-ol-iframe",horizontalscrolling:"no",verticalscrolling:"no",scrolling:"no",width:"100%",height:"100%",frameborder:"0",vspace:"0",hspace:"0",marginWidth:"0",marginHeight:"0",allowtransparency:"true",seamless:"true",target:"_parent",src:this.options.url}):"div"===this.type&&(f=M.A("div",{id:"wt-mcp-ol-div-".concat(this.id),"class":"wt-mcp-ol-div",
height:"100%"}));b=M.A("div",{"class":"wt-mcp-ol-modal-dialog",style:this.options.width?"".concat(b).concat(this.options.width+40,"px"):""},e);this.options.Se&&M.appendChild(b,M.A("div",{"class":this.options.$d||"wt-mcp-ol-modal-close","data-dismiss":"overlay"},M.createElement("span")));M.appendChild(d,b);f&&M.appendChild(e,f);document.body?(M.appendChild(document.body,d),this.R=d):document.addEventListener("DOMContentLoaded",function(){M.appendChild(document.body,d);a.R=d})};c.prototype.Ed=function(){H(this.hb,
function(a){Da(a)});this.hb=[]};c.focus=function(a){la(a.focus)&&a.focus()};c.jc=function(a){var b=!1;Ba(a,Y.end,function(){b=!0});setTimeout(function(){if(!b){var d=Y.end,e=va(a);if(e&&(d=e.K[d.toString()]))for(d=d.concat(),e=0;e<d.length;e++){var f=d[e];f&&!f.lb&&wa(f,null)}}},300)};return c}(),vc=function(){function c(a,b,d,e){void 0===d&&(d={});void 0===e&&(e={});this.Aa=null;this.Da=this.Ab=!1;this.Ka=null;this.dd=[];this.Lb="";this.J=[];this.Bd=[];this.type="MCP";if(a.action&&"COMBINED"!==a.action.type){a=
a||{};var f=a.uuid,h=a.triggerUuid,k=a.campId,l=A(a.trigger,null),m=a.action;void 0===m&&(m={});var n=E(m.queryParams||"[]");v(n)||(n=[]);m={type:A(m.type,"LAYER"),url:A(m.url,""),width:m.width,height:m.height,ke:A(m.fixedLayout,!1),transition:A(m.transition,"slide-down"),Lc:A(m.trackConversions,!1),yc:1-A(m.overlayTransparency,50)/100,Se:A(m.showClosingButton,!1),$d:m.closeClass,ya:m.urlRegex,Za:A(m.sessionCount,-1),Ia:n,content:null};m.url&&(n=m.url,0===n.indexOf("//")?n=ka()+n:0!==n.indexOf("http")&&
0!==n.indexOf("/")&&(n="".concat(ka(),"//").concat(n)),m.url=n);S(m.type,"invalid type");if("LAYER"===m.type||"CUSTOMHTML"===m.type)S(m.transition,"invalid transition"),Gb(m.Lc,"invalid trackConversions"),Fb(m.yc,"invalid overlayTransparency");S(m.url,"invalid url");T(m.Ia,"invalid queryParams");f={oa:f,tb:h,wb:k,Y:l,action:m,m:nc,ud:A(a.optIn,null)};a.titles&&(f.m={Ja:a.titles.rtb||"",Wa:a.titles.plc||"",cmp:a.titles.cmp||"",xd:a.titles.segment||"",content:a.titles.content||""});S(f.m.cmp,"ClientRule has no cmp title");
Db(u(f.Y)||null===f.Y,"Trigger is not an object ".concat(f.m));a=f}this.id=a.oa;this.uid="".concat(Date.now()).concat(parseInt("".concat(1E5*Math.random())));this.data=a;this.wb=a.wb;this.nb="campaign-".concat(this.wb);this.m=a.m;this.Y=a.Y;this.action=a.action;this.P=b;this.Mb=b.trackId;this.na=e;this.jb=d;this.store=d.storeHandle;this.Ha=(this.vc="string"===typeof a.ud)?String(a.ud):"";b=this.Ha.split("-");"string"===typeof b[1]&&(this.Lb=b[1]);this.xe()}c.prototype.eb=function(a,b){var d=this;
void 0===a&&(a=10);void 0===b&&(b="");window.setTimeout(function(){b&&D.log(b);d.evaluate()},a)};c.prototype.ue=function(){return-1!==this.action.Za&&(V.Xa(this.nb,"number","visit"),V.ja(this.nb,"visit","count")>=this.action.Za)?(D.log("clientRule: ".concat(this.m.cmp," sessionCount reached -> not registered.")),!0):!1};c.prototype.Od=function(){var a=this;v(this.action.Ia)&&0<this.action.Ia.length&&H(this.action.Ia,function(b){b=b.val;-1===b.indexOf("customSessionParameter")&&-1===b.indexOf("urmCategory")||
a.dd.push({name:b,type:"string",store:"visit"})})};c.prototype.Kc=function(a){a=hb("//t.mateti.net/mcp/t/c",{src:a,campaign:this.m.cmp,version:"1.0.5",type:1,deid:this.P.h.eid,acc:this.Mb,id:this.uid,t:z()});D.Dd(a,"","",!0)};c.prototype.pb=function(a){Ec(this.jb,{Ie:this.m.Wa,ae:this.m.content,ec:this.m.cmp,ub:a?!1:this.action.Lc,Zd:a,Ka:a?"manual":this.Ka,V:this.P.V,item:"manual"!==this.Ka?M.Bb(this.id):null},this.P.qb)};c.prototype.Wc=function(){var a=this,b=0,d=!1;H(this.Bd,function(e){var f=
V.ja(e.name,e.store,"elapsed");try{var h=xc.evaluate(e.Qe)}catch(k){D.error("clientRule.checkTimeSymbols: exception in ".concat(a.m.Ja),k);D.H({trackId:a.P.trackId,F:a.P.h.eid,type:"error",I:"clientRule.checkTimeSymbols: exception in ".concat(a.m.Ja," - ").concat(k.message),X:a.P.W});return}if(h)d=!0;else if(-1!==f){f=e.value-f;switch(e.Xd){case "gt":f++;break;case "lt":f--}0>f||b&&b>f||(b=f)}});b?(D.info("clientRule: starting timeSymbol timer for ".concat(this.m.cmp)),this.eb(1E3*b,"clientRule: timeSymbol timer fired for ".concat(this.m.cmp))):
d&&this.eb()};c.prototype.We=function(){var a=this;L("symbolUpdate",function(b){if(!a.Da)if(a.Y||"AUDIENCESTREAM"!==a.action.type)for(var d in b){if(0<=G(a.J,b[d+""])){D.info("clientRule: symbol update received (".concat(a.m.cmp,") for ").concat(b));a.eb();break}}else D.info("clientRule: re-trigger (".concat(a.m.cmp,"), if the page was updated (").concat(b,")")),a.eb()});L("pageChange",function(){a.Ab=!1;a.Da=!1})};c.prototype.Ae=function(){var a=this;""===this.action.url?this.type="MADE":B()?D.log("clientRule: stopping because in iframe ".concat(this.m.cmp)):
(this.Ka="overlay",this.action.content=Ub(this.P.Wb+this.action.url,"GET").catch(function(b){D.error("clientRule: couldnt grab custom html content",b);D.H({trackId:a.P.trackId,F:a.P.h.eid,type:"error",I:"clientRule: couldnt grab custom html - ".concat(b),X:a.P.W});return""}),this.Aa=new Uc(this.id,"div",this.action,function(b){a.pb(b)},function(){P(a.m);a.Kc("Overlay - Custom HTML")}))};c.prototype.Be=function(){var a=this;B()?D.log("clientRule: stopping because in iframe ".concat(this.m.cmp)):(this.Ka=
"overlay",this.action.url=hb(this.action.url||"",{wt_eid:this.P.h.eid,wt_t:z(),wt_mcp_parent:!0}),this.Aa=new Uc(this.id,"iframe",this.action,function(b){a.pb(b)},function(){P(a.m);a.Kc("Overlay - Layer")}))};c.prototype.ye=function(){var a=this;this.Od();this.action.Lc=!1;this.Ka="manual";this.Aa={show:function(){D.log("clientRule: ".concat(a.m.cmp," triggered audience stream tracking."));var b=a.action.url;if(v(a.action.Ia)&&0<a.action.Ia.length){var d=a.jb.wa[a.Mb].S.inputKeys,e=U.lc(d,{},"");
U.Ac(d,e,U.Dc(e));e=ea(e,function(h){return ma(h)});var f={};ca(f,a.na,e);t(a.action.Ia,function(h){var k=h.val,l="";if(-1!==k.indexOf("customSessionParameter")||-1!==k.indexOf("urmCategory"))l=a.store.ja(k,"visit","lastValue");f[k]?l=f[k]:d[k]&&(l=d[k]);k={};k[h.name]=l;b=hb(b,k)})}P(a.m);D.Dd(b,a.m.cmp,a.P.Wb,!1,a.Mb,a.uid);a.Kc("Audience Stream");return!0}}};c.prototype.ze=function(){V.ja(this.id,"visit","count")||V.Xa(this.id,"number","visit");var a=this;this.Aa={show:function(){var b=V.ja(a.action.Fe,
"page","value");V.Hd(a.id,b,b);P(a.m);return!0}}};c.prototype.xe=function(){var a=this;if(!this.ue()){this.m.oa=this.id;var b=this.m.type=this.action.type;"RECOMMENDATION"===b||"BANNER"===b||"BANNER_TEST"===b||"ABN_TEST"===b?this.type="MADE":"CUSTOMHTML"===b?this.Ae():"LAYER"===b?this.Be():"REMARKETING"===b||"AUDIENCESTREAM"===b?this.ye():"COMBINED"===b&&this.ze();wc(this);qc(this);fb(this.id,this.Aa);if(this.action.ya&&-1===window.location.href.search(this.action.ya))D.log("clientRule: ".concat(this.m.cmp,
" urlRegex not fullfilled -> setting inactive.")),this.Da=!0;else if("MADE"!==this.type&&(this.Wc(),this.We(),!this.Y))var d=window.setInterval(function(){document.body&&(window.clearInterval(d),d=null,a.eb(1))},100)}};c.prototype.evaluate=function(a,b){void 0===a&&(a="MCP");void 0===b&&(b="");if(this.type!==a||b&&this.Mb!==b)return!1;if(this.Da)return D.log("clientRule: ".concat(this.m.cmp," is deactivated.")),!1;if(this.Ab)return D.log("clientRule: ".concat(this.m.cmp," already fired -> suppressed.")),
!1;if(-1!==this.action.Za&&V.ja(this.nb,"visit","count")>=this.action.Za)return D.log("clientRule: ".concat(this.m.cmp," sessionCount reached -> suppressed.")),this.Da=!0,!1;if(this.action.ya&&-1===window.location.href.search(this.action.ya))return D.log("clientRule: ".concat(this.m.cmp," urlRegex not fullfilled -> suppressed.")),this.Da=!0,!1;D.info("clientRule: eval rule ".concat(this.m.cmp," (").concat(this.id,") for type ").concat(a));try{if(null!==this.Y&&!xc.evaluate(this.Y))return this.Wc(),
D.info("clientRule: ".concat(this.m.cmp," didnt eval true -> suppressed.")),!1}catch(d){return D.error("clientRule: exception in ".concat(this.m.Ja),d),D.H({trackId:this.P.trackId,F:this.P.h.eid,type:"error",I:"clientRule: exception in ".concat(this.m.Ja," - ").concat(d.message),X:this.P.W}),!1}a=!0;this.vc?this.Ha?(D.info("clientRule.checkOptIn: ".concat(this.m.cmp," need an opt-in.")),b=oc(this.Lb),"1"!==b&&(a=!1),D.info("clientRule.checkOptIn: ".concat(this.m.cmp," opt-in status: ").concat(a," (").concat(b,
")"))):D.info("clientRule.checkOptIn: ".concat(this.m.cmp," opt-in key is empty.")):D.info("clientRule.checkOptIn: ".concat(this.m.cmp," doesn't need an opt-in."));if(!a)return!1;D.log("clientRule: ".concat(this.m.cmp," fired!"));if(this.Aa){a=this.Aa.show();D.log("clientRule: ".concat(this.m.cmp," action handle result (").concat(a,")!"));if(!a)return!1;"COMBINED"!==this.action.type&&this.pb(!1)}D.log("clientRule: ".concat(this.m.cmp," > ").concat(this.type," fired!"));"MCP"===this.type&&(this.Ab=
!0);D.log("clientRule: ".concat(this.m.cmp," > ").concat(this.type," fired (").concat(this.Ab,")!"));-1!==this.action.Za&&(V.Hd(this.nb,1),V.ja(this.nb,"visit","count")>=this.action.Za&&(this.Da=!0));return!0};return c}();
function Vc(c,a){var b=Z,d=b.wa[a],e="(".concat(d.D.count,"/").concat(a,")");D.log("init.headCall ".concat(e));return(new Vb(c,void 0)).get(d).then(function(f){D.log("init.headCall ".concat(e,": got serverCfg"),f);d.ma=f;f.F&&f.F!==d.F?(d.F=f.F,c.h.eid=d.F):d.F&&!c.h.eid&&(c.h.eid=d.F);if(!f.ta||0===f.ta.length)return D.log("init.headCall ".concat(e,": rtb engine didnt start -> no rules")),f;D.info("init.headCall ".concat(e,": rtb engine starting"));return V.ce(a).then(function(h){D.log("init.headCall ".concat(e,
": rtb engine started"),h);0<O&&(b.visitData=V.g);H(f.ta,function(k){var l=k.uuid;b.clientRules[l]?D.error("init.headCall ".concat(e,": addClientRule: rule already added:"),k):b.clientRules[l]=new vc(k,c,b,f.na)});b.store=h;V.Bc(c.h,f.na,c.W);return f})})}var Wc={};
function Xc(c,a,b){D.log("serverData.tracking: checking if insession data needs to be send");if(a&&v(a.fb)&&0<a.fb.length){D.log("serverData.tracking: Preparing sending of tracking data for config",a.fb);var d=c.trackId,e=[],f={},h="";H(a.fb,function(l){if("undefined"!==typeof c.h[l.data]){var m=c.h[l.data];"productCategory"===l.data&&(m=m["1"]);if(x(m)||w(m)||"boolean"===typeof m)H(l.h||[],function(n){"undefined"!==typeof c.h[n]&&(f[n]=c.h[n])}),v(l.h)&&l.h.length!==fa(f).length?D.log("serverData.tracking: No or not enough requested inputKey has been found for rule/key ",
l.zb,l.data):(e.push({feedId:l.zb,value:m}),h+="".concat(l.zb,",").concat(m,","))}});if(0===e.length)D.log("serverData.tracking: No valid tracking data to send found");else{var k=[];t(f,function(l,m){k.push({name:m,value:l});h+="".concat(m,",").concat(l)});"undefined"===typeof Wc[d]&&(Wc[d]="");Wc[d]===h?D.log("serverData.tracking: ignore sending the same insession data",[e,k]):(Wc[d]=h,Ub(c.ef,"POST",{data:e,inputKeys:k,sessionId:b,trackId:d}).catch(function(l){D.error("serverData.tracking: Error while sending tracking data",
l);D.H({trackId:c.trackId,F:c.h.eid,type:"error",I:"error retrieving serverCfg - ".concat(l),X:c.W})}))}}}
function Yc(c){D.log("extToServerContent",c);var a=c.channelData;a={ha:null,la:null,ua:null,Gb:!0===c.isControlGroup,De:!0===c.isTesting,Ya:c.requestID,s:{u:A(a.divId,""),title:A(a.title,""),type:A(a.type,""),oa:a.uuid||"",sa:a.widgetConfig}};c.banner?a.ha={ha:c.banner.banner,Rc:c.banner.bannerCampaignTitle}:c.customHtml?a.ua={Zc:c.customHtml.contentTitle||"",Vc:c.customHtml.campTitle||"",be:c.customHtml.contentUrl||"",md:c.customHtml.html}:c.recos&&(a.la={items:c.recos.items,Jd:c.recos.valueMapping});
S(a.s.title);S(a.s.type);S(a.s.u);return a}
var Zc=function(){function c(a,b,d){D.log("Banner.ctor");this.N=a;this.o=b;this.uc=d;this.u=this.o.s.u}c.prototype.oe=function(a){if(!a)return null;var b=a.clientHeight,d=a.clientWidth,e=(a.getAttribute("width")||a.style.width).search(/%/);"define"===this.N.Fc&&(d=this.N.ee.split("x"),b=parseInt(d[0],10),d=parseInt(d[1],10));a=this.N.width/d;D.log("Banner.getDimension (".concat(this.u,"): scaling image ").concat(this.N.height," -> ").concat(b));var f=this.N.height/b;isFinite(a)||(a=1);isFinite(f)||
(f=1);e=!e&&d?b/d:null;var h=this.N.height/this.N.width;D.log("Banner.getDimensions (".concat(this.u,") box ratio:").concat(e," and img ratio: ").concat(h));return{height:b,width:d,Db:f,Xb:a,ratio:e,mc:h}};c.prototype.Vd=function(){D.log("Banner.buildWidget (".concat(this.u,")"));var a=document.getElementById(this.o.s.u),b=this.oe(a),d=M.A("img",{src:this.N.url}),e=M.A("div",null,M.A("a",{href:this.N.Ye},d));e.style.overflow="hidden";e.style["text-align"]="center";var f=Bc();f.item=e;f.data.Ma=this.o.s.title;
f.data.Na=this.N.title;f.data.La=this.o.ha.Rc;f.data.variant="campaign";f.data.requestId=this.o.Ya;this.o.De?f.data.variant="testing":this.o.Gb&&(f.data.variant="control group");f.vb=this.uc.Ic;f.V=this.uc.V;Cc(f,"banner",this.uc.qb);M.wd(a);M.appendChild(a,e);"define"===this.N.Fc?(a=b.height,Jc(e,b.width),Ic(e,a),1>=b.Xb&&1>=b.Db?(b=this.N.height,Jc(d,this.N.width),Ic(d,b)):(D.log("Banner.buildWidget (".concat(this.u,"): scaling image ").concat(b.Xb,"/").concat(b.Db)),b.Db*this.N.width>=b.width&&
b.Xb*this.N.height<b.height?(D.log("Banner.buildWidget (".concat(this.u,"): width is being scaled")),d.style.width="".concat(b.width,"px")):b.Db<b.Xb?(D.log("Banner.buildWidget (".concat(this.u,"): width is being scaled")),d.style.width="".concat(b.width,"px")):(D.log("Banner.buildWidget (".concat(this.u,"): height is being scaled")),d.style.height="".concat(b.height,"px")))):"contain"===this.N.Fc&&(Jc(e,"100%"),Ic(e,"auto"),e.style.lineHeight="0",d.style.maxWidth="".concat(this.N.width,"px"),b.ratio&&
b.ratio<b.mc?(e=b.height,Jc(d,"auto"),Ic(d,e),D.log("Banner (".concat(this.u,") contains in the resize case: width auto, height ").concat(b.height))):!b.ratio&&5<b.height?(Jc(d,"100%"),Ic(d,"auto"),d.style.maxWidth="".concat(b.height/b.mc,"px"),D.log("Banner (".concat(this.u,") contains in the responsive case: width 100%, height auto, max-width ").concat(b.height/b.mc))):(Jc(d,"100%"),Ic(d,"auto"),D.log("Banner (".concat(this.u,") contains in the responsive case: width 100%, height auto"))))};c.prototype.start=
function(){D.log("Banner.start (".concat(this.u,")"));document.getElementById(this.u)?this.Vd():D.error("Banner.start (".concat(this.u,"): couldnt find the target element ").concat(this.u))};return c}(),$c=function(){function c(a,b){this.$b="wt-mcp-html-script-";this.item=null;this.mb=[];D.log("CustomHtml.ctor");this.o=a;this.S=b;this.ga=document.getElementById(this.o.s.u);this.Jb=this.o.ua.md;null===this.ga?D.error("customHtml.create: couldnt find element",a.s.u):x(this.Jb)||D.error("customHtml.create: no markup given")}
c.prototype.Ne=function(a){var b=this;D.log("CustomHtml.replaceScriptTags (markup)",a);return a.replace(/<script(.*?)>([\s\S]*?)<\/script>/gmi,function(d,e,f){return b.Oe(d,e,f)})};c.prototype.Oe=function(a,b,d){D.log("CustomHtml.replaceScriptTagsMatchHandler (match, attrs, content)",[a,b,d]);b=document.createElement("div");b.innerHTML=a;a=b.firstChild;b={};for(var e=0;e<a.attributes.length;e++){var f=a.attributes[e];b[f.nodeName]=f.nodeValue}this.mb.push(M.A("script",b,d));return"<div class='".concat(this.$b).concat(this.mb.length,
"'></div>")};c.prototype.we=function(){var a=this;D.log("CustomHtml.includeScriptTags",this.mb);H(this.mb,function(b,d){var e=M.qe("".concat(a.$b).concat(d+1),a.item);e?M.appendChild(e,b):D.error("Couldnt find script tag selector ".concat(a.$b).concat(d+1))});this.mb=[]};c.prototype.pb=function(a){D.log("CustomHtml._teaserTracking");var b=Bc();b.item=a;b.data.Ma=this.o.s.title;b.data.Na=this.o.ua.Zc;b.data.La=this.o.ua.Vc;b.data.variant="campaign";b.data.requestId=this.o.Ya;this.o.Gb&&(b.data.variant=
"control group");b.vb=this.S.Ic;b.V=this.S.V;Cc(b,"custom",this.S.qb)};c.prototype.start=function(){D.log("CustomHtml.append");M.wd(this.ga);this.Jb=this.Ne(this.Jb);this.item=document.createElement("div");this.item.innerHTML=this.Jb;this.we();M.appendChild(this.ga,this.item);this.pb(this.ga)};return c}(),ad=!1,bd=function(){function c(a,b){this.Sa={};this.Hb=!1;this.Pc=this.Ba=this.Ca=this.aa=this.Z=this.za=this.T=this.M=this.Oa=null;this.align="horizontal";D.log("Reco(".concat(a.s.u,").ctor"));
this.j=a.s.sa;this.o=a;this.S=b;this.ic="wt-".concat(this.o.Ya);this.j.id=a.s.u;this.U=M.Bb(this.o.s.u);this.ab=new Fc(0,0);this.ba={Yb:null,Zb:null};this.o.fd=this.o.fd||!1;this.o.yb=this.o.yb||!1}c.prototype.Fa=function(a,b){D.log("Reco(".concat(this.j.id,").loadPage (next:").concat(a,", isEndless:").concat(b,")"));var d=this;return function(){D.info("Reco(".concat(d.j.id,").loadPage.click (isSlideshowActive:").concat(d.Hb,")"));if(!d.Hb){d.Hb=!0;var e=void 0!==d.T.style.transitionDuration,f=parseFloat(d.T.getAttribute("data-transition-duration")),
h=0;if("vertical"===d.align){var k=d.T.offsetTop;var l=d.M.clientHeight;var m=d.T.clientHeight;var n="top"}else k=d.T.offsetLeft,l=d.M.clientWidth,m=d.T.clientWidth,n="left";a?h=b&&-k===m-l?0:-(k-l)>=m-l?-(m-l):k-l:0<-k-l&&(h=k+l);d.kd(-h,l,m);e&&b&&0===h&&(d.T.style.transitionDuration="0s");d.T.style[n]="".concat(h,"px");window.setTimeout(function(){e&&(d.T.style.transitionDuration="".concat(f,"s"));d.Hb=!1},1E3*f)}}};c.prototype.kd=function(a,b,d){null!==this.aa&&null!==this.Z&&(0>=a?(M.bc(this.aa,
"disabled"),M.Qb(this.Z,"disabled")):(a+b>=d?M.bc(this.Z,"disabled"):M.Qb(this.Z,"disabled"),M.Qb(this.aa,"disabled")))};c.prototype.Jc=function(a){D.info("Reco(".concat(this.j.id,").toggleAutoCarousel stop:").concat(a));this.Pa&&window.clearInterval(this.Pa);a?this.Pc&&window.clearTimeout(this.Pc):this.Pa=window.setInterval(this.Fa(!0,!0),1E3*this.j.ea.Pa)};c.pe=function(a){return/^[1-9]/.test(a)?"[id='".concat(a,"']"):"#".concat(a)};c.prototype.Ce=function(){D.log("Reco(".concat(this.j.id,").injectCss"));
ad||(Gc(".wt-widget, .wt-widget * {box-sizing: border-box;}.wt-widget {height: 100%;width: 100%;overflow: hidden;position: relative;}.wt-widget-row:after, .wt-widget-row:before {display: table;content: ' ';clear: both;}.wt-widget-col {height: 100%;float: left;}.wt-widget-nav-outer {width: 39px;cursor: pointer;}.wt-widget-vertical .wt-widget-nav-outer {height: 39px;width: 100%;text-align: center;}.wt-widget-nav {height: 100%;width: 100%;display: inline-block;}.wt-widget-nav:before {display: block;}.wt-widget-nav.up:before,.wt-widget-nav.left:before {content: '<';}.wt-widget-nav.down:before,.wt-widget-nav.right:before {content: '>';}.wt-widget-nav.up:before,.wt-widget-nav.down:before {position: relative;top: 50%;transform: translateY(-50%) rotate(90deg);-ms-transform: translateY(-50%) rotate(90deg);}.wt-widget-nav.right,.wt-widget-nav.left {text-align: center;}.wt-widget-horizontal .wt-widget-nav,.wt-widget-cubical .wt-widget-nav,.wt-widget-nav.right:before,.wt-widget-nav.left:before {position: relative;top: 50%;transform: translateY(-50%);-ms-transform: translateY(-50%);}.wt-reco-wrapper-outer {height: 100%;margin: 0;padding: 0;position: relative;overflow: hidden;}.wt-reco-wrapper-inner {height: 100%;margin: 0;padding: 0;display: block;list-style-type: none;position: absolute;left: 0;top: 0;overflow: hidden;white-space: nowrap;}.wt-widget-vertical .wt-reco-wrapper-inner {height: auto;width: 100%;}.wt-widget-vertical .wt-reco-item {width: auto;display: block;}.wt-reco-item img {max-width: 100%;height: auto;}.wt-reco-item {height: 100%;width: 160px;padding: 5px 8px;display: inline-block;white-space: nowrap;color: #333;font-size: 14px;text-align: center;text-decoration: none;}.wt-reco-item-empty {display: none;}.wt-reco-item a {display: block;max-height: 100%;overflow: hidden;color: inherit;text-decoration: inherit;}.wt-reco-item a:active, .wt-reco-item a:focus, .wt-reco-item a:visited {color: inherit;text-decoration: inherit;}.wt-reco-item img {max-height: 180px;width: auto;}.wt-widget-banner-front,.wt-widget-banner-back {display:none;}.wt-widget-banner a {height:100%;width: 100%;display:inline-block;}"),
ad=!0);if(this.j.Ra&&x(this.j.Ra)){var a=c.pe(this.o.s.u);this.j.Ra=this.j.Ra.replace(/(^|}|\*\/)\.(wt-widget-|wt-reco-)/gmi,function(d,e,f){return"".concat(e).concat(a," .").concat(f)});this.pa={};var b=this.j.Ra.match(/\.wt-reco-item\s{([^*]*)}/gmi);b&&x(b[0])&&(this.pa={width:(b[0].match(/min-width\s*:\s*(\d*)px/mi)||[])[1],height:(b[0].match(/min-height\s*:\s*(\d*)px/mi)||[])[1]},D.info("Reco(".concat(this.j.id,").injectCss: found reco item min width value ").concat(this.pa)));Gc(this.j.Ra)}};
c.prototype.ad=function(){D.log("Reco(".concat(this.j.id,").determineDimensions"));var a=this.o.yb,b=this.Oa.clientHeight-1,d=this.Oa.clientWidth-1;null===this.aa||null===this.Z||a||("vertical"!==this.align?(d-=this.aa.offsetWidth,d-=this.Z.offsetWidth):(b-=this.aa.offsetHeight,b-=this.Z.offsetHeight));"horizontal"!==this.align?(b-=this.Ba.offsetHeight,b-=this.Ca.offsetHeight):(d-=this.Ba.offsetWidth,d-=this.Ca.offsetWidth);return new Fc(d,b)};c.prototype.cf=function(){var a=this.U.clientHeight,b=
this.U.clientHeight;this.o.fd&&null!==this.za?(a+=this.za.offsetHeight,a+=this.za.offsetTop):null!==this.za&&(b-=this.za.offsetHeight,b-=this.za.offsetTop);"vertical"!==this.align||this.o.yb||null===this.aa||null===this.Z||(b-=this.aa.offsetHeight,b-=this.Z.offsetHeight);"horizontal"!==this.align&&(b-=this.Ca.offsetHeight,b-=this.Ba.offsetHeight);this.U.style.height="".concat(a,"px");this.M.parentElement.style.height="".concat(b,"px")};c.prototype.Wd=function(){var a=this;D.log("Reco(".concat(this.j.id,
").buildWidgetScaffold"));this.U.innerHTML="";var b=this.j.ea.gd;this.Oa=M.A("div",{id:this.ic,"class":"wt-widget wt-widget-reco wt-widget-".concat(this.align),style:"visibility: hidden;"});M.appendChild(this.U,this.Oa);b&&0<b.length&&""!==b[0]&&(this.za=M.A("div",{"class":"wt-widget-headline",id:"".concat(this.j.id,"-wt-widget-headline")},b[0]),M.appendChild(this.Oa,M.A("div",{"class":"wt-widget-row"},this.za)));this.Ca=this.Sc("front",this.j.me||"");this.Ba=this.Sc("back",this.j.Qd||"");this.o.la.items.length>
this.j.ea.Vb?(this.aa=this.Tc("vertical"===this.align?"up":"left"),this.Z=this.Tc("vertical"===this.align?"down":"right"),this.aa.onclick=this.Fa(),this.Z.onclick=this.Fa(!0),this.kd(0,0,0),-1!==this.j.ea.Pa&&(this.Jc(),J(this.U,"mouseover",function(){D.info("Reco(".concat(a.j.id,") autoCarousel: mouseover detected -> stopping auto scroll"));a.Jc(!0)}),J(this.U,"mouseout",function(){D.info("Reco(".concat(a.j.id,") autoCarousel: mouseout detected -> continuing auto scroll"));a.Jc()}))):this.o.yb=!0;
this.M=M.A("div",{"class":"wt-widget-col wt-reco-wrapper-outer"});b=[];"vertical"===this.align?(b.push(M.A("div",{"class":"wt-widget-row"},this.Ca)),b.push(M.A("div",{"class":"wt-widget-row"},this.aa)),b.push(M.A("div",{"class":"wt-widget-row"},this.M)),b.push(M.A("div",{"class":"wt-widget-row"},this.Z)),b.push(M.A("div",{"class":"wt-widget-row"},this.Ba))):"cubical"===this.align?(b.push(M.A("div",{"class":"wt-widget-row"},this.Ca)),b.push(M.A("div",{"class":"wt-widget-row"},this.aa,this.M,this.Z)),
b.push(M.A("div",{"class":"wt-widget-row"},this.Ba))):b.push(M.A("div",{"class":"wt-widget-row"},this.Ca,this.aa,this.M,this.Z,this.Ba));M.Pd(this.Oa,b);this.ab=this.ad();this.M.style.width="".concat(this.ab.width,"px");this.cf();this.Sd();M.appendChild(this.M,this.T);this.Oa.style.visibility=""};c.prototype.Sc=function(a,b){D.log("Reco(".concat(this.j.id,").buildBanner suffix: ").concat(a,", link: ").concat(b));return M.A("div",{id:"".concat(this.j.id,"-wt-widget-banner-").concat(a),"class":"wt-widget-col wt-widget-banner wt-widget-banner-".concat(a)},
M.A("a",{href:b,target:"_blank"}))};c.prototype.Tc=function(a){D.log("Reco(".concat(this.j.id,").buildNavItem orientation: ").concat(a));return M.A("div",{"class":"wt-widget-col wt-widget-nav-outer"},M.A("span",{"class":"wt-widget-nav ".concat(a)}))};c.prototype.Sd=function(){var a=this;D.log("Reco(".concat(this.j.id,").buildReco"));var b=this.Xc(),d=this.o.la.items,e=Math.ceil(d.length/b)*b;this.T=this.Td(this.Yd(b,e));var f=this.j.ea.wc,h=!1;H(this.o.la.Jd,function(m,n){a.Sa[m.id]=n;"url"===m.dataType&&
(a.de=n);!h&&0<=G(f,m.id)&&(h=!0)});if(f&&f.length){b=Math.floor(100/e*100)/100;for(var k=0;k<e;k++){var l=void 0;l=d[k]?this.Ud(k+1,b,d[k]):this.Rd(k+1,b);M.appendChild(this.T,l)}}};c.prototype.Td=function(a){return M.A("ol",{"class":"wt-widget-row wt-reco-wrapper-inner",style:("vertical"===this.align?"top":"left")+": 0px; transition-duration: 0.8s; ".concat(a),"data-transition-duration":"0.8"})};c.prototype.Yd=function(a,b){return"vertical"!==this.align?"width: ".concat(this.M.offsetWidth/a*b,"px;"):
"height: ".concat(this.M.offsetHeight/a*b,"px;")};c.prototype.Xc=function(){var a=this.j.ea.Vb;if(!this.pa)return a;"vertical"===this.align?this.pa.height&&this.M.offsetHeight/a<this.pa.height&&(a=parseInt("".concat(this.M.offsetHeight/this.pa.height))):this.pa.width&&this.M.offsetWidth/a<this.pa.width&&(a=parseInt("".concat(this.M.offsetWidth/this.pa.width)));return a};c.prototype.Rd=function(a,b){var d=M.A("a");a=M.A("li",{"class":"wt-reco-item wt-reco-item-slot-".concat(a," wt-reco-item-empty"),
style:"".concat("vertical"===this.align?"height":"width",": ").concat(b,"%;")});M.appendChild(a,d);return a};c.prototype.Ud=function(a,b,d){D.info("Reco(".concat(this.j.id,").buildRecoItem (itemObject, itemIndex)"),d,a,b);for(var e=this.j.ea.wc,f=ka(),h=[],k=0;k<e.length;k++)if(w(this.Sa[e[k]])){var l=this.Sa[e[k]],m=this.o.la.Jd[l].dataType||"text";l=d[l];"undefined"===typeof l&&(l="");switch(m){case "currency":l=l.split(".");l[1]&&1===l[1].length&&(l[1]+="0");l=l.join(this.j.ea.$a);l="".concat(this.j.ea.$c,
" ").concat(l);m="wt-widget-currency-field";break;case "number":l="0.0"===l?"":l.split(".").join(this.j.ea.$a);m="wt-widget-number-field";break;case "pictureUrl":"https:"===f&&"-"!==l&&""!==l&&(l=l.replace(/http:/i,"https:"));l=M.A("img",{src:l});m="wt-widget-image-field";break;case "url":l=M.A("a",{href:l,target:"_top"});m="wt-widget-url-field";break;default:"-"===l?m="":(m=l,l=this.j.ea.Hc,m.length>l&&(m="".concat(m.substring(0,l-3),"..."))),l=m,m="wt-widget-text-field"}m+=" wt-widget-category-".concat(e[k].toLowerCase().split(" ").join(""));
h.push(M.A("div",{"class":m},l))}e=M.A.apply(M,p(["a",{href:d[this.de]||"#",target:"_top"}],h,!1));f="width";"vertical"===this.align&&(f="height");b=M.A("li",{"class":"wt-reco-item wt-reco-item-slot-".concat(a),style:"".concat(f,": ").concat(b,"%;")},e);f=Bc();h=this.Sa.campaignTitle||this.Sa.ruleTitle;f.item=e;f.ga=this.T;f.data.Ma=this.o.s.title;f.data.Na=d[this.Sa.id];f.data.La=d[h];f.data.variant="campaign";f.data.requestId=this.o.Ya;f.data.od="".concat(a);this.o.Gb&&(f.data.variant="control group");
f.vb=this.S.Ic;f.V=this.S.V;Cc(f,"reco",this.S.qb);return b};c.prototype.$e=function(a){if(a=a.touches[0]||a.changedTouches[0])this.ba.move=!1,this.ba.Yb=a.clientX,this.ba.Zb=a.clientY};c.prototype.Ze=function(a){if(this.ba.Yb&&this.ba.Zb&&this.ba.move){D.info("Reco(".concat(this.j.id,").touchend: detected touch swipe to change page"));var b=a.touches[0]||a.changedTouches[0];b&&(a=this.ba.Yb-b.clientX,b=this.ba.Zb-b.clientY,Math.abs(a)>Math.abs(b)?0<a?this.Fa(!0)():this.Fa(!1)():0<b?this.Fa(!0)():
this.Fa(!1)(),this.ba.Yb=null,this.ba.Zb=null,this.ba.move=!1)}};c.prototype.start=function(){var a=this;D.log("Reco(".concat(this.j.id,").start"),this.U);if(null===this.U)D.error("Reco(".concat(this.j.id,").start: couldnt find the target element ").concat(this.o.s.u));else if(v(this.o.la.items)&&0!==this.o.la.items.length){var b=this.U.clientHeight/this.U.clientWidth;this.align=.8<b&&1.2>b?"cubical":this.U.clientHeight>this.U.clientWidth?"vertical":"horizontal";this.Ce();this.Wd();var d=J(window,
"resize",function(){D.log("Reco(".concat(a.j.id,").resize ").concat(a.ic));if(M.Bb(a.ic)){var e=a.ad();if(0!==e.width&&0!==e.height&&!Fc.he(a.ab,e)){D.log("RecoWidget.resize: size changed!");a.ab=e;a.M.style.width="".concat(a.ab.width,"px");e=a.Xc();var f=Math.ceil(a.o.la.items.length/e)*e;"vertical"===a.align?a.T.style.height="".concat(a.M.offsetHeight/e*f,"px"):a.T.style.width="".concat(a.M.offsetWidth/e*f,"px");var h=Math.floor(100/f*100)/100;H(M.re("wt-reco-item",a.T),function(k){"vertical"===
a.align?k.style.height="".concat(h,"%"):k.style.width="".concat(h,"%")})}}else Da(d)});this.U.addEventListener("touchstart",function(e){a.$e(e)});this.U.addEventListener("touchmove",function(e){a.ba.move=!0;e.preventDefault()});this.U.addEventListener("touchend",function(e){a.Ze(e)})}else D.log("Reco(".concat(this.j.id,").start: no items found aborting.")),!0===this.o.Gb&&(D.log("Reco(".concat(this.j.id,").start: this is an empty contrl grp, sending tracking data.")),"1"===this.S.qb?this.S.W.tt.addClickParameter(this.o.s.title,
"no visible controlgroup","","1","","","","control group","",!1,this.o.Ya,"","","",""):(b=this.S.V,window[b]=window[b]||[],window[b].push(["view",{name:"no visible controlgroup",rank:this.o.s.title,content:"",variant:"control group",requestId:this.o.Ya,targetGroup:"",rule:"",itemPage:"",itemPosition:""}])))};return c}();
function cd(c,a,b,d){var e=c.trackId;D.log("(".concat(e,") serverContent: grabing widgetData"));if(window.wt_masterExampleMockResponse)return Promise.resolve(I(window.wt_masterExampleMockResponse.content,Yc));var f={};f=b&&b.filter.h&&0<=b.filter.h.length?ea(c.h,function(n,y){return 0<=G(b.filter.h,y)}):c.h;d&&u(d.h)&&t(d.h,function(n,y){f[y]=n});f.eid||(f.eid=c.h.eid);var h=[];if(b&&b.filter.Nb&&0<=b.filter.Nb.length){var k=U.lc(c.h,{},"");U.Ac(c.h,k,U.Dc(k));H(b.filter.Nb,function(n){v(n.categoryFilters)&&
H(n.categoryFilters,function(y){if(x(y.inputKey)&&ma(k[y.inputKey])){var q=k[y.inputKey];v(q)&&(q=q.join(";"));y.inputValue=q}});-1!==G(a,n.divId)&&h.push(n)})}var l={trackId:e,divIds:a,url:c.url||document.location.href,withConfig:!1,inputKeys:f,placements:h};d&&u(d.request)&&t(d.request,function(n,y){l[y]=n});var m;return Ub(c.Oc,"POST",l).then(function(n){n=E(n).content||[];D.log("(".concat(e,") serverContent: grabing widgetConfigs"));if(!n||0===n.length)return D.log("(".concat(e,") serverContent: no content retrieved -> stopping")),
Promise.all([]);var y=[];m=I(n,Yc);H(m,function(q){var C=c.Wb+q.s.sa;"ONSITEDIV_CUSTOM_HTML"===q.s.type&&(C=c.Wb+q.ua.be);q.la&&0===q.la.items.length?(D.error("(".concat(e,") serverContent: no reco items transmitted, stopping for this widget cfg"),q.s.u),y.push(Promise.resolve("[]"))):y.push(Ub(C,"GET"))});return Promise.all(y)}).then(function(n){D.log("(".concat(e,") serverContent: merging serverContent and config"),m,n);var y=[];H(n||[],function(q,C){var Q=m[C].s;if(u(q))D.error("(".concat(e,") serverContent: couldn't grab widgetConfig"),
q.text),D.H({trackId:e,F:c.h.eid,type:"error",I:"serverContent: couldn't grab widgetConfig (".concat(Q.sa,") - ").concat(q.text),X:c.W}),m[C].ve=!0,y.push(m[C]);else{try{var oa=E(q)}catch(ld){oa=q}v(oa)&&v(oa)&&!oa.length||("ONSITEDIV_CUSTOM_HTML"===Q.type?m[C].ua.md=q:Q.sa=0!==q.length?oa:null,y.push(m[C]))}});return y}).catch(function(n){D.error("(".concat(e,") error retrieving serverContent"),n);D.H({trackId:e,F:c.h.eid,type:"error",I:"error retrieving serverContent (".concat(a,")- ").concat(n),
X:c.W});return[]})}
function dd(c,a,b){var d=[],e,f=!1;H(c,function(h){D.log("switch: ".concat(h.s.type),h.s.u);d.push(h.s.u);if(!h.ve)switch(h.s.type){case "ONSITEDIV_BANNER":f=!0;e=E(h.ha.ha);P({u:h.s.u,type:h.s.type,Wa:h.s.title,cmp:h.ha.Rc,content:(e||{}).title||""});D.log("Banner.create",h.ha.ha);var k=E(h.ha.ha);if(k){var l=h.s.sa;D.log("Banner.externalToBannerConfig");D.log("banner scaling type and size",l.bannerScaling,l.bannerSize);var m={id:k.id};m.width=k.width||0;m.height=k.height;m.title=k.title;m.url=k.url;
m.Ye=k.targetUrl;m.Fc=A(l.bannerScaling,"contain");m.ee=A(l.bannerSize,"250x250");Fb(m.id,"invalid id");Fb(m.width,"invalid width");(new Zc(m,h,a)).start()}break;case "ONSITEDIV_RECO":if(!u(h.s.sa))break;f=!0;P({u:h.s.u,type:h.s.type,Wa:h.s.title,cmp:"",content:""});k=h.s;l=h.s.sa;D.log("extToRecoConfig",l);m=l.customCss;var n=l.layout;D.log("wt.mcp.recommendDiv.externalToLayoutConfig",n);n={Pa:A(n.autoCarousel,-1),$c:A(n.currencySymbol,"\u20ac"),fe:A(n.displayLoadingAnimation,!1),gd:A(n.feedRowTitles,
[]),wc:A(n.objectPropertyDisplayOrder,[]),Hc:A(n.shortenTitlesTo,40),$a:A(n.thousandSeparator,"comma"),Vb:A(n.visibleObjectCount,6)};switch(n.$a){case "comma":n.$a=",";break;case "point":n.$a="."}Fb(n.Pa,"autoCarousel");S(n.$c,"currencySymbol");Gb(n.fe,"displayLoadingAnimation");T(n.gd,"feedRowTitles");T(n.wc,"objectPropertyDisplayOrder");Fb(n.Hc,"shortenTitlesTo");Db(10<n.Hc,"shortenTitlesTo > 10");S(n.$a,"thousandSeparator");Fb(n.Vb,"visibleObjectCount");Db(0<n.Vb,"config.visibleObjectCount > 0");
k.sa={id:"",Ra:m,ea:n,me:l.frontBannerLink,Qd:l.backBannerLink,version:parseInt("".concat(l.version))||0};1<=h.s.sa.version&&(D.log("wt.mcp.recommendDiv.create",h,a),(new bd(h,a)).start());break;case "ONSITEDIV_CUSTOM_HTML":f=!0;P({u:h.s.u,type:h.s.type,Wa:h.s.title,cmp:h.ua.Vc,content:h.ua.Zc});D.log("customHtml.create divId ".concat(h.s.u));(new $c(h,a)).start();break;default:D.log("init.bodyCall ".concat(b,": unknown channelType ").concat(h.s.type))}});return{le:d,Me:f}}
function ed(c,a){a=a||[];for(var b=M.jd("div[id]"),d=[],e=0;e<b.length;e++){var f=b[e];if(-1===a.indexOf(f.id)&&(!c||-1!==c.indexOf(f.id))){var h=!1;h||"hidden"!==(Lc(f,"visibility")||f.style.visibility)||(h=!0);h||"none"!==(Lc(f,"display")||f.style.display)||(h=!0);h?D.log("init.grabDivIds: skipping hidden divId",f.id):d.push(f.id)}}return d}
function fd(c,a,b){var d=Z,e=d.wa[a],f="(".concat(e.D.count,"/").concat(a,")"),h=[];D.log("init.bodyCall ".concat(f));null===e.D.head&&(e.D.head=Vc(c,a));return e.D.head.then(function(){e.F!==c.h.eid&&(c.h.eid=e.F);var k=[];if(null!==d.store&&e.ma.ta&&0!==e.ma.ta.length)try{V.Bc(c.h,{},c.W),t(d.clientRules,function(m){qc(m);var n=(m.data||{}).tb;n&&-1===k.indexOf(n)&&m.evaluate("MADE",a)&&(k.push(n),D.log("init.bodyCall ".concat(f,": RTB  ").concat(m.m.Ja," for MADE triggered")))}),D.log("init.bodyCall ".concat(f,
": got MADE triggerUUUids ").concat(k))}catch(m){Ab(a,b,["init.bodyCall ".concat(f,": processing inputKeys and triggerUUIDs"),m]),D.error("init.bodyCall ".concat(f,": processing inputKeys and triggerUUIDs"),m),D.H({trackId:a,F:e.F,type:"error",I:"bodyCall processing inputKeys and triggerUUIDs - ".concat(m),sessionId:e.sessionId,X:c.W})}e.Cd||Xc(c,e.ma,e.sessionId);if(0===h.length){var l=I(e.ma.filter.bb,function(m){return m.ya&&-1===window.location.href.search(m.ya)?(D.log("init.bodyCall ".concat(f,
": urlregex(").concat(m.ya,") not fullfilled for divId ").concat(m.u)),""):m.u});sa(l);h=ed(l,e.ka);if(0===h.length)return D.log("init.bodyCall ".concat(f,": couldn't find any configured divIds (whiteList, blackList))"),l," || ",e.ka),Promise.resolve([]);D.log("init.bodyCall ".concat(f,": grabbed divIds (found, whiteList, blackList))"),h,l,e.ka)}e.ka=e.ka.concat(h);return cd(c,h,e.ma,{request:{sessionId:e.sessionId,pageId:e.zc},h:{triggerUuids:k}})}).then(function(k){D.log("init.bodyCall ".concat(f,
": process serverContents"),k);var l=dd(k,c,f),m=l.le;l.Me?(Bb("rendering: '".concat(b,"' start timeout after 200ms for ").concat(a),k),window.setTimeout(function(){Bb("rendering: '".concat(b,"' start timeout for ").concat(a),k);Ab(a,b,["after rendering",k]);ub()},200)):Ab(a,b,["skipped rendering",k]);H(h,function(n){-1===m.indexOf(n)&&(e.D.cb[n]=e.D.cb[n]?++e.D.cb[n]:1,3<=e.D.cb[n]?D.log("init.bodyCall ".concat(f,": not unflagging ").concat(n," because of too many request tries")):(ra(e.ka,n),D.info("init.bodyCall ".concat(f,
": unflagging ").concat(n," which was returned empty"),e.ka)))})}).catch(function(k){Ab(a,b,["init.bodyCall ".concat(f,": sth. happened"),k]);D.error("init.bodyCall ".concat(f,": sth. happened"),k);D.H({trackId:a,F:c.h.eid,type:"error",I:"bodyCall sth. happened - ".concat(k),sessionId:e.sessionId,X:c.W})})}
function gd(c,a,b){if(!x(a)||""===a)return D.error("init: trackId is empty or not a string"),Promise.reject(!1);D.log("extToMCPCfg",b);b={bb:A(b.bb,Hb),trackId:A(a,b.trackId),h:b.inputKeys,Ic:A(b.teaserAttribute,"data-teaser"),qb:A(b.teaserVersion,"1"),V:A(b.teaserName,"wt_ttv2"),Oc:A(b.widgetServiceUrl,"//r.mateti.net/rdfs"),Wb:A(b.widgetConfigUrlBase,"//cdn.mateti.net"),ef:A(b.widgetTrackingUrlBase,"//t.mateti.net/t/insession/data"),mf:A(b.withConfig,!0),W:b.trackingPixel};T(b.bb);Db(x(b.trackId));
S(b.Oc);var d=Z;b.W&&(d.X=b.W);d.wa[a]=d.wa[a]||{zc:Pa(z()+(b.h.eid||0)+parseInt("".concat(100*Math.random()),10)),ma:null,S:null,Cd:!1,ka:[],F:b.h.eid,D:{history:[],count:0,body:null,head:null,ka:[],cb:{}}};d=d.wa[a];d.F||D.error("(".concat(d.D.count,"/").concat(a,") No eid has been passed for ").concat(c));d.D.count++;if("body"===c&&-1!==d.D.history.indexOf("body"))D.log("(".concat(d.D.count,"/").concat(a,") body was already processed, changing to update")),c="update";else if("update"===c&&-1===
d.D.history.indexOf("body"))D.log("(".concat(d.D.count,"/").concat(a,") no body was processed, changing to body")),c="body";else if("head"===c&&-1!==d.D.history.indexOf("head"))return D.log("(".concat(d.D.count,"/").concat(a,") head was already processed. Skipping it.")),Promise.reject(!1);if("body"===c){var e=[d];"undefined"!==typeof R[a]&&(R[a].push("body"),wb("save: '".concat("body","' for ").concat(a),e))}d.D.history.push(c);if("head"===c)return d.D.head=Vc(b,a),d.D.head;if("body"===c)return d.D.ka=
[],d.D.body=fd(b,a,"body"),d.D.body;"update"===c?(c=Z,d=c.wa[a],b.h&&b.h.linkId&&(b.h.contentId||(b.h.contentId=d.S.inputKeys.contentId)),b.h&&!b.h.contentId?(D.log("init.update (".concat(d.D.count,"/").concat(a,"): received request without contentId")),a=Promise.resolve()):(b.h.contentId===d.S.inputKeys.contentId?(D.log("init.update (".concat(d.D.count,"/").concat(a,"): received update with unchanged contentId, same page")),c.store&&d.ma.ta&&0!==d.ma.ta.length&&V.Bc(b.h,d.ma?d.ma.na:{},b.W),d.D.body=
fd(b,a,"update"),d.S=b):(D.log("init.update (".concat(d.D.count,"/").concat(a,"): received update, new page")),d.Cd=!1,d.D.cb={},d.zc=Pa(z()+(d.F||"0")+parseInt("".concat(100*Math.random()),10)),d.ka=[],d.D.history=["head","body"],d.D.body=fd(b,a,"update")),a=d.D.body)):a=Promise.resolve();return a}
function hd(c){if(c.inputKeys){var a=c.inputKeys;a.mediacode&&(a.mediacode=decodeURIComponent(a.mediacode.replace(/\+/g," ")),a.keyword||(a.keyword="-"));a.keyword&&(a.keyword=decodeURIComponent(a.keyword.replace(/\+/g," ")));a.referrer&&(a.referrer=decodeURIComponent(a.referrer.replace(/\+/g," ")));if(!a.productCategory){var b={};t(a,function(h,k){if(0===k.lastIndexOf("productCategory",0)){var l=k.split("productCategory")[1];l&&(b[l]=h,delete a[k])}});r(b)||(a.productCategory=b)}else if(v(a.productCategory)){var d=
{};H(a.productCategory,function(h,k){d[k]=h});r(d)||(a.productCategory=d)}if(!a.contentGroup){var e={};t(a,function(h,k){if(0===k.lastIndexOf("contentCategory",0)){var l=k.split("contentCategory")[1];l&&(e[l]=h,delete a[k])}});r(e)||(a.contentGroup=e)}var f={};t(a,function(h,k){if(!u(h)||u(h)&&!r(h))f[k]=h});c.inputKeys=f}}
var jd=function(){function c(a){this.xa=[];this.identifier="";this.rc=!1;this.ie=a}c.prototype.next=function(){var a=this;if(0>=this.xa.length)D.log("PromiseQueue (".concat(this.identifier,"): queue is empty, stop executing")),this.rc=!1;else{var b=this.xa[0];this.ie.apply(this,b).then(function(d){D.log.apply(D,p(["PromiseQueue (".concat(a.identifier,"): executor status"),d],b,!1))}).catch(function(d){D.error.apply(D,p(["PromiseQueue (".concat(a.identifier,"): executor error"),d],b,!1))}).finally(function(){a.xa.shift();
window.setTimeout(function(){0<a.xa.length&&D.log.apply(D,p(["PromiseQueue (".concat(a.identifier,"): execute next")],a.xa[0],!1));a.next()},200)})}};c.prototype.start=function(){!this.rc&&0<this.xa.length&&(this.rc=!0,D.log.apply(D,p(["PromiseQueue (".concat(this.identifier,"): execute next")],this.xa[0],!1)),this.next())};c.prototype.add=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];D.log.apply(D,p(["PromiseQueue (".concat(this.identifier,"): add data")],a,!1));this.xa.push(a);
this.start()};c.te=function(a){var b=id;"undefined"===typeof c.Fb[a]&&(c.Fb[a]=new c(b),c.Fb[a].identifier=a);return c.Fb[a]};c.Fb={};return c}(),Z={wa:{},store:null,clientRules:{},serverCfg:{},storeHandle:{},visitData:{},X:null};function id(c,a,b){return gd(c,a,b).then(function(){Z.wa[a].S=b;return Promise.resolve(!0)}).catch(function(d){return Promise.reject(d)})}
function kd(c,a){D.log("init.MAIN",c,a);if("undefined"!==typeof Promise&&"function"===typeof fetch){var b=a.trackId,d=a.trackId;if(!v(d)){if(!x(d)){D.error("init: trackId doesnt have a valid format (".concat(d,")"));return}D.error("init: string trackId found, converting to array (".concat(d,")"));b=[d]}a.optOut||a.trackingPixel&&a.trackingPixel.optOut?(ub(),D.log("init: detected webtrekk optOut cookie. Disabling MCP"),N("wt.mcp.optOut",1)):"head"===c&&bb("wt.mcp.optOut")?(ub(),D.log("init: detected webtrekk optOut cookie from previous pi. Disabling MCP")):
(hd(a),"head"===c&&zb(b,[c,a]),H(b,function(e){jd.te(e).add(c,e,a)}))}else ub(),D.log("init: stopping execution because required features are not supported"),D.H({trackId:a.trackId,type:"info",I:"stopping execution because required features are not supported"})}
(function(c){function a(d){try{v(d)&&kd(d[0],d[1])}catch(e){ub(),D.error("MCPinit: catching exception",e),D.H({type:"error",I:"MCPinit entry - ".concat(e.message)})}}if(u(c)&&!v(c))return window.wt_mcp_config;for(var b=0;b<c.length;b++)a(c[b]);window.wt_mcp_config={push:a,length:0,version:"1.0.5",mcpLoaded:!0,setDebug:function(d){N("wt.mcp.debug",d||1);window.location.reload()},setPrediction:function(d){N("wt.mcp.prediction",d||1);window.location.reload()},clearCache:function(d){N("wt.mcp.debug",
"1");try{window.localStorage.removeItem("wt.mcp.visit")}catch(e){}t(window.localStorage,function(e,f){if(-1!==f.indexOf("wt.mcp.w"))try{window.localStorage.removeItem(f)}catch(h){}});Kb("wt_mcp_sid");"string"===typeof d&&window.wt&&window.wt.setCookie&&window.wt.setCookie("wt3_eid",";".concat(d));ab.Nc({});window.location.reload()}};db()&&(window.wt_mcp_config.debug=Z);eb()&&(window.wt_mcp_config.prediction=Z);return window.wt_mcp_config})(window.wt_mcp_config||[]);}.call(this))
